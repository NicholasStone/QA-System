webpackJsonp([1],{"1/oy":function(t,e){},"5zVm":function(t,e){},"8Rb9":function(t,e){},"8wB9":function(t,e){},"9M+g":function(t,e){},DEim:function(t,e){},DT5i:function(t,e){},Dqwv:function(t,e){},G72p:function(t,e){},HJYo:function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},LPMm:function(t,e){},LghQ:function(t,e){},RgVg:function(t,e){},RyIb:function(t,e){},SU2x:function(t,e){},TEaD:function(t,e){},YkUL:function(t,e){},"aT/M":function(t,e){},aq1M:function(t,e){},cSs5:function(t,e){},dzWU:function(t,e){},eslX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r=a("/ocq"),i=a("NYxO"),s=a("//Fk"),o=a.n(s),c=a("M4fF"),l=a.n(c),u=a("lbHh"),d=a.n(u),p="Token";var m={set:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;return d.a.set(e,t,{expires:a})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return d.a.get(t)},revoke:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return d.a.remove(t)}},f=a("mtWM"),h=a.n(f),v={url:{app:"https://qa.dev",api:"https://api.qa.dev"},search:{appId:"T2TA5RNB5Y",apiSecret:"9568ab295bfd78bcb6fefb2be99d33a6"}},b=h.a.create({baseURL:v.url.api,headers:{Accept:"application/prs.qa.v1+json"}});b.interceptors.request.use(function(t){return y.getters.authorization&&(t.headers.Authorization=y.getters.authorization),t},function(t){console.error(t)}),b.interceptors.response.use(function(t){return o.a.resolve(t)},function(t){401===t.response.status&&y.dispatch("revoke").then(Pt.push({name:"Sign-in"}));var e=[],a=t.response.data;return void 0===a.errors?e.push(a.message):e=function t(e){if(l.a.isObject(e)||l.a.isArray(e)){var a=[];return l.a.forEach(e,function(e){a=a.concat(t(e))}),a}return[e]}(a.errors),o.a.reject(e)});var _=b,g={state:{token:m.get()?m.get():"",expiration:m.get("expiration")?m.get("expiration"):"",type:"Bearer"},getters:{token:function(t){return t.token},authorization:function(t){return t.type+" "+t.token},expiration:function(t){return t.expiration},authenticated:function(t){return!l.a.isEmpty(t.token)}},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_EXPIRATION:function(t,e){t.expiration=e},CLEAR_AUTHORIZATION:function(t){t.expiration="",t.token=""}},actions:{authorize:function(t,e){t.commit;var a=t.dispatch;return new o.a(function(t,n){_.post("authorization",e).then(function(e){a("update",e.data),a("addMessage",{message:"登录成功",type:"success"}),t()}).catch(function(t){console.log("Error in authorization"),console.log(t),n(t)})})},revoke:function(t){var e=t.commit,a=t.dispatch;return new o.a(function(t){e("CLEAR_AUTHORIZATION"),a("deleteProfile"),m.revoke(),_.delete("authorization").then(function(){t()})})},update:function(t,e){var a=t.commit,n=t.dispatch,r=e.token,i=e.expiration;return new o.a(function(t,e){a("SET_TOKEN",r),a("SET_EXPIRATION",i),m.set(r),m.set(i,"expiration"),n("getProfile").then(function(){t()}).catch(function(t){n("addMessage",{type:"danger",message:"用户信息更新失败，请登录"}),e(t)})})}}},w=a("fZjL"),x=a.n(w),k={authorization:g,profile:{state:{id:"",name:"",email:"",avatar:"",role:0,created:"",updated:"",introduction:""},getters:{id:function(t){return t.id},name:function(t){return t.name},email:function(t){return t.email},avatar:function(t){return 0===t.avatar.length?v.appUrl+"storage/users/default.png":t.avatar},role:function(t){return t.role},created:function(t){return t.created},updated:function(t){return t.updated},introduction:function(t){return t.introduction},profile:function(t){var e=t.id,a=t.name,n=t.email,r=t.avatar,i=t.role,s=t.created,o=t.updated,c=t.introduction;return{id:e,name:a,email:n,avatar:0===r.length?v.appUrl+"storage/users/default.png":r,role:i,created:s,updated:o,introduction:c}}},mutations:{SET_EMAIL:function(t,e){l.a.isEmpty(e)||(t.email=e)},SET_NAME:function(t,e){l.a.isEmpty(e)||(t.name=e)},SET_AVATAR:function(t,e){l.a.isEmpty(e)||(t.avatar=e)},SET_INTRODUCTION:function(t,e){l.a.isEmpty(e)||(t.introduction=e)},SET_PROFILE:function(t,e){var a=e.id,n=e.name,r=e.email,i=e.avatar,s=e.role,o=e.atom,c=o.created,l=o.updated,u=o.introduction;t.id=a,t.name=n,t.email=r,t.avatar=i,t.role=s,t.created=c,t.updated=l,t.introduction=u},CLEAR_PROFILE:function(t){x()(t).forEach(function(e){t[e]=""})}},actions:{getProfile:function(t){var e=t.commit;return new o.a(function(t,a){_.get("/user",{params:{include:"atom"}}).then(function(a){e("SET_PROFILE",a.data),t()}).catch(function(t){a(t)})})},updateProfile:function(t,e){var a=t.commit,n=t.dispatch;return new o.a(function(t,r){var i={};l.a.each(e,function(t,e){l.a.isEmpty(t)||(i[e]=t)}),_.patch("/user",i).then(function(t){a("SET_NAME",e.name),a("SET_INTRODUCTION",e.introduction),n("success","您的个人信息已更新完毕"),console.log(t)}).catch(function(t){n("except","更新个人信息时出现问题"),console.log(t),r(t)})})},deleteProfile:function(t){(0,t.commit)("CLEAR_PROFILE")},updateAvatar:function(t,e){var a=t.commit,n=t.dispatch;return new o.a(function(t,r){var i=new FormData;i.append("type","avatar"),i.append("image",e),_.post("image",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a("SET_AVATAR",e.data.path),t(e)}).catch(function(t){l.a.forEach(t,function(t){n("except",t)}),r(t)})})}}},message:{state:{index:0,messages:[]},getters:{messages:function(t){return t.messages}},mutations:{ADD_MESSAGE:function(t,e){t.messages.push(e)},CLEAR_MESSAGE:function(t){t.messages.length=0},INCREASE_INDEX:function(t){t.index+=1},READ:function(t,e){t.messages[e].read=!0}},actions:{addMessage:function(t,e){var a=t.commit,n=t.state,r=e.message,i=e.type,s=e.expire,o=void 0===s?10:s;a("ADD_MESSAGE",{index:n.index,type:i,message:r,expire:o,read:!1,local:!1})},read:function(t,e){var a=t.commit;return new o.a(function(t){a("READ",e),t()})},except:function(t,e){(0,t.commit)("ADD_MESSAGE",{index:t.state.index,type:"danger",message:e,expire:10,read:!1,local:!1})},success:function(t,e){(0,t.commit)("ADD_MESSAGE",{index:t.state.index,type:"success",message:e,expire:10,read:!1,local:!1})}}}};a("ABOc");n.a.use(i.a);var y=new i.a.Store({modules:k},{authentication:function(t){return t.authorization.getters.authorization},authenticated:function(t){return t.authorization.getters.authenticated},token:function(t){return t.authorization.getters.token},profile:function(t){return t.profile.getters.profile},avatar:function(t){return t.profile.getters.avatar},role:function(t){return t.profile.getters.role},name:function(t){return t.profile.getters.name},messages:function(t){return t.message.getters.messages}});var q=[function(){y.getters.authenticated&&0===y.getters.role&&y.dispatch("getProfile")},function(t,e){var a=["/register","/sign-in","/login"];if(y.getters.authenticated&&a.includes(t.fullPath))return a.includes(e.fullPath)?{path:"/"}:{path:e.fullPath}},function(t,e){if(t.matched.some(function(t){return t.meta.auth})&&!y.getters.authenticated)return{name:"Sign-in",query:{redirect:t.fullPath}}}],C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"sr-only"},[t._v("搜索")]),t._v(" "),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keys,expression:"keys"}],staticClass:"form-control rounded-0",attrs:{id:"search-input",placeholder:"找份卷子做做..."},domProps:{value:t.keys},on:{input:function(e){e.target.composing||(t.keys=e.target.value)}}}),t._v(" "),a("span",{staticClass:"input-group-append"},[a("router-link",{staticClass:"btn btn-dark btn-lg rounded-0",attrs:{to:{name:"Search",query:{q:t.keys}},type:"submit"}},[t._v("搜索")])],1)])])])},staticRenderFns:[]};var E=a("VU/8")({name:"Search",data:function(){return{keys:""}}},C,!1,function(t){a("SU2x")},null,null).exports,$={name:"Index",components:{search:E},data:function(){return{search:""}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("h1",{staticClass:"mt-5 title text-center"},[this._v("考拉")]),this._v(" "),e("search",{staticClass:"offset-2 col-8"}),this._v(" "),e("div",{staticClass:"text-center"},[e("router-link",{staticClass:"btn btn-dark rounded-0 col-2 mr-5",attrs:{to:{name:"Examination",params:{id:Math.ceil(200*Math.random())}}}},[this._v("\n          手气不错\n        ")]),this._v(" "),e("router-link",{staticClass:"btn btn-dark rounded-0 col-2",attrs:{to:{name:"Paper"}}},[this._v("\n          我要出题\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")($,R,!1,function(t){a("aT/M")},"data-v-5a992af2",null).exports,A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]};var z=a("VU/8")({name:"Blank"},A,!1,function(t){a("5zVm")},"data-v-4758a80e",null).exports,T=a("woOf"),P=a.n(T),U={name:"Register",data:function(){return{alerts:[],captcha:{hit:"请输入验证码以确认您不是机器人",image:""},errors:{name:"",email:"",password:"",captcha:""},form:{name:"",email:"",password:"",passwordRepeat:"",captcha:{key:"",code:""}}}},computed:{nameStates:function(){return""===this.errors.name&&null},emailStates:function(){return""===this.errors.email&&null},passwordStates:function(){return""===this.form.password?null:this.form.password.length>=6},captchaStates:function(){return""===this.errors.captcha&&null},passwordRepeatStates:function(){return""===this.form.passwordRepeat||this.form.passwordRepeat.length<6?null:this.form.passwordRepeat===this.form.password}},methods:{validate:function(t){t.preventDefault(),this.form.password.length>=6&&this.form.password===this.form.passwordRepeat&&""!==this.form.captcha.code&&this.register()},formReset:function(t){var e=this;t.preventDefault(),this.form.email="",this.form.password="",this.form.passwordRepeat="",this.show=!1,this.$nextTick(function(){e.show=!0})},getCaptcha:function(){var t=this;""===this.form.email?this.errors.email="请先填写电子邮件":h.a.post("/captchas",{email:this.form.email,name:this.form.name}).then(function(e){t.form.captcha.key=e.data.captcha_key,t.captcha.hit+="  Hit:验证码将于"+e.data.expired_at+"过期",t.captcha.image=e.data.captcha_image_content}).catch(function(t){console.log(t)})},register:function(){var t=this;h.a.post("/user",this.form).then(function(e){t.$store.dispatch("update",e.data).then(function(){t.$store.dispatch("addMessage",{message:"登录成功",type:"success"}),t.$router.push("Home")}).catch(function(){t.alerts.push({type:"danger",message:"自动登录时发生错误，"})})}).catch(this.errorHandler)},errorHandler:function(t){this.errors=P()(this.errors,t.response.data.errors)}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{cols:"8"}},[t._l(t.alerts,function(t,e,n){return a("alert",{key:n,attrs:{alerts:t}})}),t._v(" "),a("b-card",{attrs:{id:"register",title:"注册","sub-title":"下一站，考拉"}},[a("b-form",{on:{submit:t.validate,reset:t.formReset}},[a("b-form-group",{attrs:{id:"name-group",label:"昵称","label-for":"name",description:"选一个名字"}},[a("b-form-input",{attrs:{id:"name",state:t.nameStates,type:"text",required:"","aria-describedby":"name-feedback",placeholder:"请填写您的昵称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"name-feedback"}},t._l(t.errors.name,function(e,n,r){return a("span",{key:r},[t._v(t._s(e))])}))],1),t._v(" "),a("b-form-group",{attrs:{id:"email-group",label:"电子邮箱","label-for":"email",description:"注意：您在注册后将不能修改邮箱"}},[a("b-form-input",{attrs:{id:"email",state:t.emailStates,type:"email",required:"","aria-describedby":"email-feedback",placeholder:"请填写您的电子邮件"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"email-feedback"}},t._l(t.errors.email,function(e,n,r){return a("span",{key:r},[t._v(t._s(e))])}))],1),t._v(" "),a("b-form-group",{attrs:{id:"password-group",label:"Password","label-for":"password",description:"请选择一个强密码，至少6个字符"}},[a("b-form-input",{attrs:{id:"password",state:t.passwordStates,type:"password",required:"","aria-describedby":"password-feedback",placeholder:"请在此填写密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"password-feedback"}},[t._v("\n              密码需要至少6个字符\n            ")])],1),t._v(" "),a("b-form-group",{attrs:{id:"password-repeat-group",label:"确认密码","label-for":"password",description:"再次输入密码以进行确认"}},[a("b-form-input",{attrs:{id:"password-repeat",state:t.passwordRepeatStates,type:"password",required:"","aria-describedby":"password-repeat-feedback",placeholder:"请在此再次输入密码以进行确认"},model:{value:t.form.passwordRepeat,callback:function(e){t.$set(t.form,"passwordRepeat",e)},expression:"form.passwordRepeat"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"password-repeat-feedback"}},[t._v("\n              您两次输入的密码不一致\n            ")])],1),t._v(" "),a("b-form-group",{attrs:{id:"captcha-group",description:t.captcha.hit,label:"验证码","label-for":"captcha"}},[a("b-row",[a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{id:"captcha",state:t.captchaStates,typt:"text",required:"",placeholder:"请输入验证码","aria-describedby":"captcha-feedback"},model:{value:t.form.captcha.code,callback:function(e){t.$set(t.form.captcha,"code",e)},expression:"form.captcha.code"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"captcha-feedback"}},[t._v("\n                  "+t._s(t.errors.captcha)+"\n                ")])],1),t._v(" "),a("b-col",{attrs:{cols:"3"}},[""===t.captcha.image?a("b-button",{on:{click:function(e){t.getCaptcha()}}},[t._v("点击获取验证码\n                ")]):a("b-img",{attrs:{src:t.captcha.image,fluid:""},on:{click:function(e){t.getCaptcha()}}})],1)],1)],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("注册\n          ")]),t._v(" "),a("b-button",{attrs:{typt:"reset",variant:"default"}},[t._v("重写\n          ")])],1)],1)],2)],1)],1)},staticRenderFns:[]};var N=a("VU/8")(U,M,!1,function(t){a("HJYo")},"data-v-d0fac04e",null).exports,D={name:"SignIn",data:function(){return{form:{email:"",password:""},alerts:[]}},computed:{passwordState:function(){return(""===this.form.password||this.form.password.length>=6)&&null}},methods:{formReset:function(t){var e=this;t.preventDefault(),this.form.email="",this.form.password="",this.show=!1,this.$nextTick(function(){e.show=!0})},clearAlerts:function(){this.alerts.length=0},authorization:function(t){var e=this;t.preventDefault(),this.form.password.length>=6&&this.$store.dispatch("authorize",this.form).then(function(){e.$router.push("Home")}).catch(function(t){e.clearAlerts(),e.form.password="",l.a.forEach(t,function(t,a){e.alerts.push({index:a,expire:10,type:"danger",message:t,local:!0})})})}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"justify-content-md-center",attrs:{id:"sign-in"}},[a("b-col",{attrs:{cols:"8"}},[t._l(t.alerts,function(t,e,n){return a("alert",{key:n,attrs:{alerts:t}})}),t._v(" "),a("b-card",{attrs:{title:"登录","sub-title":"登录以进行下一步操作"}},[a("b-form",{on:{reset:t.formReset,submit:t.authorization}},[a("b-form-group",{attrs:{id:"email-group",label:"电子邮箱","label-for":"email",description:"请输入您在此注册的邮件"}},[a("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"请输入邮件"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"password-group",label:"密码","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",state:t.passwordState,type:"password",required:"","aria-describedby":"password-feedback",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"password-feedback"}},[t._v("\n              密码需要至少6个字符\n            ")])],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("登录\n          ")]),t._v(" "),a("b-button",{attrs:{type:"reset",variant:"default"}},[t._v("清空\n          ")])],1)],1)],2)],1)],1)},staticRenderFns:[]};var F=a("VU/8")(D,O,!1,function(t){a("LPMm")},"data-v-47156b91",null).exports,I=a("Dd8w"),V=a.n(I),L={name:"Profile",data:function(){return{name:"",introduction:""}},computed:V()({},Object(i.c)(["profile"]),{introductionFeedback:function(){return this.introduction.length+"/50"},introductionState:function(){return 0===this.introduction.length?null:this.introduction.length<=50}}),methods:{update:function(){this.$store.dispatch("updateProfile",{name:this.name,introduction:this.introduction}).then(this.reset())},reset:function(){var t=this;this.name="",this.introduction="",this.show=!1,this.$nextTick(function(){t.show=!0})},redirectToAvatar:function(){this.$router.push({name:"Avatar"})}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("b-form",{on:{submit:function(e){return e.stopPropagation(),t.update(e)},reset:function(e){return e.stopPropagation(),t.reset(e)}}},[a("b-form-row",[a("b-col",{attrs:{cols:"8",offset:"2"}},[a("b-form-group",{attrs:{id:"id",horizontal:"",label:"用户 ID","label-for":"name","label-cols":"3","label-class":"text-sm-right"}},[a("b-input",{attrs:{id:"name",disabled:""},model:{value:t.profile.id,callback:function(e){t.$set(t.profile,"id",e)},expression:"profile.id"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"name-group",breakpoint:"md",horizontal:"",label:"用户名","labal-cols":"3","label-for":"name","label-class":"text-sm-right"}},[a("b-input",{attrs:{id:"name",placeholder:t.profile.name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"introduction",state:t.introductionState,"invalid-feedback":t.introductionFeedback,"valid-feedback":t.introductionFeedback,breakpoint:"md",horizontal:"",label:"自我简介","label-cols":"3","label-for":"name","label-class":"text-sm-right",description:"个人简介，请不要超过 50 个字"}},[a("b-form-textarea",{attrs:{id:"introduction",state:t.introductionState,placeholder:t.profile.introduction,rows:"3","max-rows":"6"},model:{value:t.introduction,callback:function(e){t.introduction=e},expression:"introduction"}})],1)],1),t._v(" "),a("div",{staticClass:"w-100"}),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{cols:"2",offset:"2"}},[a("p",[t._v("头像")])]),t._v(" "),a("b-col",{attrs:{cols:"4"}},[a("b-img",{staticClass:"img-thumbnail",attrs:{src:t.profile.avatar,fluid:""},on:{click:t.redirectToAvatar}}),t._v(" "),a("p",{staticClass:"text-muted text-center mt-auto mb-auto"},[a("small",[t._v("点击更换头像")])])],1),t._v(" "),a("div",{staticClass:"w-100"}),t._v(" "),a("b-col",{attrs:{offset:"4"}},[a("b-button",{attrs:{size:"small",type:"submit",variant:"primary"}},[t._v("\n          提交\n        ")]),t._v(" "),a("b-button",{attrs:{size:"small",type:"reset",variant:"default"}},[t._v("\n          重置\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var j=a("VU/8")(L,H,!1,function(t){a("oMJ1")},"data-v-7ab4a74a",null).exports,Q={name:"Avatar",data:function(){return{image:"",file:null}},computed:{avatar:function(){return 0===this.image.length?this.$store.getters.avatar:this.image},ready:function(){return null!==this.file}},methods:{select:function(){document.getElementById("image").click()},fileChanged:function(t){var e=this,a=t.target.files||t.dataTransfer.files;if(0!==a.length){var n=new FileReader;n.onload=function(t){e.image=t.target.result},n.readAsDataURL(a[0]),this.file=a[0]}},upload:function(){var t=this;this.$store.dispatch("updateAvatar",this.file).then(function(){t.$router.push({name:"Profile"})})}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",[a("b-card",[a("b-col",{attrs:{cols:"6",offset:"3"}},[a("b-img",{attrs:{src:t.avatar,fluid:"",alt:"头像"}}),t._v(" "),a("div",{staticClass:"text-center btn-container mt-2"},[a("b-button",{attrs:{type:"button",variant:"default"},on:{click:t.select}},[t._v("\n            选择文件\n          ")]),t._v(" "),t.ready?a("b-button",{attrs:{type:"button",variant:"success"},on:{click:t.upload}},[t._v("\n            上传\n          ")]):t._e()],1),t._v(" "),a("form",[a("input",{attrs:{id:"image",hidden:"",type:"file",name:"image"},on:{change:t.fileChanged}})])],1)],1)],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(Q,B,!1,function(t){a("pET9")},"data-v-49d497ae",null).exports,J={name:"Dashboard",data:function(){return{notices:[]}},created:function(){var t=this;_.get("/notice").then(function(e){t.notices=e.data.data}).catch(function(e){return t.$store.dispatch("except",e)})}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5 pt-5"},[a("b-row",{attrs:{"align-h":"around"}},[a("b-col",{attrs:{cols:"3"}},[a("router-link",{staticClass:"btn btn-block btn-outline-light home-button new-exam border-dark rounded-0",attrs:{to:{name:"Paper"}}},[t._v("\n        去做题\n      ")])],1),t._v(" "),a("b-col",{attrs:{cols:"3"}},[a("router-link",{staticClass:"btn btn-block btn-outline-light home-button new-paper border-dark rounded-0",attrs:{to:{name:"New-Question"}}},[t._v("\n        去出题\n      ")])],1),t._v(" "),a("b-col",{attrs:{cols:"3"}},[a("router-link",{staticClass:"btn btn-block btn-outline-light home-button random-exam border-dark rounded-0",attrs:{to:{name:"Examination",params:{id:Math.ceil(200*Math.random())}}}},[t._v("\n        手气不错\n      ")])],1)],1),t._v(" "),a("b-row",{staticClass:"mt-5 pt-5",attrs:{"align-h":"center"}},[a("b-col",{attrs:{cols:"10"}},[a("b-card",{staticClass:"notice",attrs:{"no-body":"",header:"系统公告"}},[a("b-list-group",{attrs:{flush:""}},t._l(t.notices,function(e,n){return a("b-list-group-item",{key:n,attrs:{button:""},on:{click:function(a){t.$router.push({name:"Notice",params:{id:e.id}})}}},[t._v("\n            "+t._s(e.title)+" "),a("span",{staticClass:"float-right text-muted"},[t._v("发布时间: "+t._s(e.published))])])}))],1)],1)],1)],1)},staticRenderFns:[]};var W=a("VU/8")(J,G,!1,function(t){a("h9HQ")},"data-v-5f2d297a",null).exports,X={name:"Question",props:{question:{type:Object,required:!0,default:function(){return null}}},data:function(){return{fields:{value:"#",text:"选项内容"}}},computed:{subTitle:function(){var t=this.question;return t.user?t.user.name+" 创建于 "+t.created:null}},methods:{answer:function(t){return t instanceof Array?t.join(","):t}}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{staticClass:"mb-2 w-100",attrs:{"sub-title":t.subTitle}},[a("p",{staticClass:"text-info"},[t._v(t._s(t.question.tag.title))]),t._v(" "),a("p",{staticClass:"title mb-2"},[t._v(t._s(t.question.title))]),t._v(" "),a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"detail-"+t.question.id,expression:"`detail-${question.id}`"}],attrs:{size:"sm",variant:"primary"}},[t._v("\n    查看选项\n  ")]),t._v(" "),a("b-collapse",{staticClass:"mt-3",attrs:{id:"detail-"+t.question.id}},[t.question.options?a("b-table",{attrs:{items:t.question.options,fields:t.fields,bordered:"",striped:"",hover:""}}):t._e(),t._v(" "),t.question.answer?a("p",[t._v("答案: "),a("br"),t._v(t._s(t.answer(t.question.answer)))]):t._e()],1)],1)},staticRenderFns:[]};var K=a("VU/8")(X,Z,!1,function(t){a("RgVg")},"data-v-8f5b30e4",null).exports,tt={name:"Question",components:{question:K},props:{id:{type:Number,default:0}},data:function(){return{questions:[]}},beforeMount:function(){var t=this;_.get("bank/question/"+(this.id?this.id:""),{params:{include:this.id?"user,answer":"user"}}).then(function(e){t.id?t.questions.push(e.data):t.questions=e.data.data})}},et={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-row",this._l(this.questions,function(t,a){return e("question",{key:a,attrs:{question:t}})}))},staticRenderFns:[]};var at=a("VU/8")(tt,et,!1,function(t){a("YkUL")},"data-v-52e63f96",null).exports,nt={name:"Paper",data:function(){return{papers:[],fields:{id:"#",title:"题目",score:"分数"}}},beforeMount:function(){var t=this;_.get("/bank/paper/",{params:{include:"user,questions"}}).then(function(e){t.papers=e.data.data}).catch(function(e){t.$store.dispatch("except",e)})},methods:{exam:function(t){this.$router.push({name:"Examination",params:{id:t}})}}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",t._l(t.papers,function(e,n){return a("b-card",{key:n,staticClass:"mb-2 col-10",attrs:{title:e.title,"sub-title":e.user.name+" 创建于 "+e.created}},[a("b-table",{attrs:{items:e.questions.data,fields:t.fields,hover:"",striped:"",bordered:""}}),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:function(a){t.exam(e.id)}}},[t._v("\n      做题\n    ")])],1)}))},staticRenderFns:[]};var it=a("VU/8")(nt,rt,!1,function(t){a("xTgz")},"data-v-652d82da",null).exports,st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{staticClass:"p-2"},[a("b-col",{attrs:{cols:"3"}},[a("b-list-group",t._l(t.catalog,function(e,n){return a("b-list-group-item",{key:n,attrs:{to:e.to}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),t._v(" "),a("div",{staticClass:"mt-2 w-100"}),t._v(" "),a("b-list-group",t._l(t.options,function(e,n){return a("b-list-group-item",{key:n,attrs:{to:e.to}},[t._v("\n        "+t._s(e.name)+"\n      ")])}))],1),t._v(" "),a("b-col",[a("router-view")],1)],1)},staticRenderFns:[]};var ot=a("VU/8")({name:"Bank",data:function(){return{catalog:[{name:"类型列表",to:{name:"QuestionTag"}},{name:"题库",to:{name:"Question"}},{name:"试卷库",to:{name:"Paper"}}],options:[{name:"出新题",to:{name:"New-Question"}},{name:"出新试卷",to:{name:"New-Paper"}}]}}},st,!1,function(t){a("RyIb")},"data-v-38554f9d",null).exports,ct={name:"Alert",props:{alerts:{type:Object,default:function(){return{type:"light",message:"",index:0,expire:!1,local:!0}}}},data:function(){return{countdown:this.alerts.expire}},computed:{show:function(){return!1===this.alerts.expire||this.alerts.expire}},methods:{read:function(t){this.alerts.local||this.$store.dispatch("read",t)},countdownChange:function(t){this.countdown=t}}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.alerts.read?t._e():a("b-alert",{key:t.alerts.index,attrs:{variant:t.alerts.type,show:t.show,dismissible:""},on:{dismissed:function(e){t.read(t.alerts.index)},"dismiss-count-down":t.countdownChange}},[t._v("\n  "+t._s(t.alerts.message)),a("br"),t._v(" "),t.alerts.expire?a("small",[t._v("此消息将在"+t._s(t.countdown)+"秒后关闭")]):t._e()])},staticRenderFns:[]};var ut=a("VU/8")(ct,lt,!1,function(t){a("DEim")},"data-v-4f834521",null).exports,dt={name:"QuestionTag",components:{alert:ut},props:{slug:{type:String,default:""}},data:function(){return{tags:[]}},beforeMount:function(){var t=this;""!==this.slug&&(this.url+=this.slug),_.get("/bank/question-tag",{params:{include:"user"}}).then(function(e){e.data.data?t.tags=e.data.data:t.tags.push(e.data)})}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.tags.length?a("b-row",t._l(t.tags,function(e,n){return a("b-card",{key:n,staticClass:"mb-2 col-10",attrs:{title:e.title,"sub-title":e.user.name+" 创建于 "+e.created}},[a("p",[t._v(t._s(e.description))])])})):a("alert",{attrs:{alerts:{type:"danger",message:"查询的类型不存在",index:0,expire:!1,local:!0}}})},staticRenderFns:[]};var mt=a("VU/8")(dt,pt,!1,function(t){a("DT5i")},"data-v-07a18d40",null).exports,ft=(a("y3Hw"),a("3Jm6"),a("PDMX"),{name:"NewPaper",components:{question:K,icon:a("ykR9").a},filters:{pluck_id:function(t){return t.map(function(t){return t.id}).join(" , ")}},data:function(){return{id:null,title:"",questions:[],pagination:null,answer:[]}},computed:{total_score:function(){return this.answer.reduce(function(t,e){return t+e.score},0)}},beforeMount:function(){var t=this;_.get("bank/question",{params:{per_page:40}}).then(function(e){t.questions=e.data.data,t.pagination=e.data.meta.pagination})},methods:{submit:function(){var t=this;this.id?this.attachQuestions():this.createPaper().then(function(){return t.attachQuestions()})},getOrigin:function(t){return this.questions[t.id]},remove:function(t){this.answer.splice(t,1)},swapUp:function(t){this.answer.splice(t-1,2,this.answer[t],this.answer[t-1])},swapDown:function(t){this.answer.splice(t,2,this.answer[t+1],this.answer[t])},createPaper:function(){var t=this;return new o.a(function(e,a){_.post("bank/paper",{title:t.title}).then(function(a){t.$store.dispatch("success","成功建立试题，id : "+a.data.id),t.id=a.data.id,e(a)}).catch(function(e){t.$store.dispatch("except",e),a(e)})})},attachQuestions:function(){var t=this,e=this.answer.map(function(t,e){return{id:t.id,score:t.score,sequence:e+1}});return new o.a(function(a,n){_.post("bank/paper/"+t.id+"/attach",{questions:e}).then(function(e){t.$store.dispatch("success","已添加试题"),a(e)}).catch(function(e){t.$store.dispatch("except",e),n(e)})})}}}),ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("b-form-group",{attrs:{id:"paper-title-group",horizontal:"","label-cols":"2",breakpoint:"md",label:"试卷标题","label-size":"lg","label-for":"paper-title"}},[a("b-form-input",{attrs:{id:"paper-title",size:"lg",type:"text"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("small",[t._v("总分 "),a("b",[t._v(t._s(t.total_score))])]),t._v(" "),a("div",{staticClass:"mb-4"},[t._v("加入的题目")]),t._v(" "),t._l(t.selected,function(e,n){return a("b-row",{key:n},[a("b-col",{attrs:{cols:"2"}},[a("label",{staticClass:"mb-2"},[t._v(" 第 "+t._s(n+1)+" 题 ")]),t._v(" "),a("div",{staticClass:"w-100"}),t._v(" "),a("b-button-group",[a("b-button",{staticClass:"icon-center",attrs:{variant:"danger",size:"sm"},on:{click:function(e){t.remove(n)}}},[a("icon",{attrs:{name:"trash-alt"}})],1),t._v(" "),0!==n?a("b-button",{staticClass:"icon-center",attrs:{size:"sm",variant:"default"},on:{click:function(e){t.swapUp(n)}}},[a("icon",{attrs:{name:"arrow-up"}})],1):t._e(),t._v(" "),n!==t.selected.length-1?a("b-button",{staticClass:"icon-center",attrs:{size:"sm",variant:"default"},on:{click:function(e){t.swapDown(n)}}},[a("icon",{attrs:{name:"arrow-down"}})],1):t._e()],1),t._v(" "),a("b-form-group",{staticClass:"mt-2",attrs:{"label-for":"question-"+e.id+"-score","label-cols":"5",label:"分数",horizontal:""}},[a("b-form-input",{attrs:{id:"question-"+e.id+"-score",type:"number",size:"sm"},model:{value:e.score,callback:function(a){t.$set(e,"score",t._n(a))},expression:"item.score"}})],1)],1),t._v(" "),a("b-col",[a("question",{attrs:{question:t.getOrigin(e)}})],1)],1)}),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"question-list",expression:"'question-list'"}],attrs:{variant:"outline-primary",block:""}},[t._v("\n      添加新题目\n    ")]),t._v(" "),a("b-button",{staticClass:"mt-2",attrs:{variant:"success",type:"submit"}},[t._v("\n      提交新试卷\n    ")]),t._v(" "),a("b-modal",{attrs:{id:"question-list",title:"请选择题目",size:"lg","ok-only":"",centered:""}},[a("b-container",{staticClass:"question-list",attrs:{fluid:""}},t._l(t.questions,function(e,n){return a("b-form-checkbox",{key:n,attrs:{id:e.id+"-checkbox",value:{id:e.id,score:10}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("span",[t._v("试题编号 "+t._s(e.id))]),t._v(" "),a("question",{attrs:{question:e}})],1)})),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[t._v("\n        已选择题目编号 "+t._s(t._f("pluck_id")(t.selected))+"\n      ")])],1)],2)],1)},staticRenderFns:[]};var vt=a("VU/8")(ft,ht,!1,function(t){a("jCjH")},"data-v-409fd6f0",null).exports,bt={name:"NewQuestion",data:function(){return{question:{title:"",tag:null,options:[{t:""}],answer:""},original_tags:[]}},computed:{tags:function(){var t=this.original_tags.map(function(t,e){return{value:e,text:t.title}});return t.push({value:null,text:"请选择题目类型"}),t},type:function(){return null!==this.question.tag&&this.original_tags[this.question.tag].type},validateAnswer:function(){return this.type&&0!==this.question.answer.length?/^\d+(,\d+)*$/.test(this.question.answer):null},validateOptions:function(){return!(this.type&&this.question.options.length<2)&&null}},beforeMount:function(){var t=this;_.get("/bank/question-tag").then(function(e){t.original_tags=e.data.data})},methods:{addOption:function(){this.question.options.push({t:""})},removeOption:function(t){this.question.options.splice(t,1)},submit:function(){var t={question:this.question.title,type:this.type,tag:this.question.tag,options:this.question.options,answer:this.question.answer};_.post("/bank/question",t).then(function(t){return console.log(t.data)})}}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{attrs:{title:"新题目","sub-title":"请填写下列空白"}},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("b-form-group",{attrs:{id:"question-title-group",horizontal:"",label:"题面","label-for":"question-title","label-cols":"3",breakpoint:"md"}},[a("b-form-textarea",{attrs:{id:"question-title",rows:"3",type:"text"},model:{value:t.question.title,callback:function(e){t.$set(t.question,"title",e)},expression:"question.title"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"question-tag-group",horizontal:"",label:"类型","label-for":"question-tag","label-cols":"3",breakpoint:"md"}},[a("b-form-select",{attrs:{id:"question-tag",options:t.tags},model:{value:t.question.tag,callback:function(e){t.$set(t.question,"tag",e)},expression:"question.tag"}})],1),t._v(" "),t.type?a("b-form-group",{attrs:{id:"question-options-group",state:t.validateOptions,horizontal:"",label:"选项","label-cols":"3",breakpoint:"md","invalid-feedback":"选项最少两个"}},[t._l(t.question.options,function(e,n){return a("b-form-group",{key:n,attrs:{id:"question-option-group-"+n,label:"# "+(n+1),"label-for":"question-option-"+n,"label-cols":"1",horizontal:""}},[a("div",{staticClass:"input-group"},[a("b-form-input",{attrs:{id:"question-option-"+n,type:"text"},model:{value:e.t,callback:function(a){t.$set(e,"t",a)},expression:"option.t"}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){t.removeOption(n)}}},[t._v("\n              删除此项\n            ")])],1)],1)])}),t._v(" "),a("b-button",{attrs:{variant:"success"},on:{click:t.addOption}},[t._v("\n        添加新选项\n      ")])],2):t._e(),t._v(" "),a("b-form-group",{attrs:{id:"question-answer-group",state:t.validateAnswer,"invalid-feedback":"请按照提示输入格式正确的答案",label:"问题答案","label-for":"question-answer","label-cols":"3",description:"选择题答案请填写选项编号，多选请将选项用 <b>英文逗号 ( ',' )</b> 隔开",horizontal:""}},[a("b-form-textarea",{attrs:{id:"question-answer",state:t.validateAnswer,type:"text",rows:"3"},model:{value:t.question.answer,callback:function(e){t.$set(t.question,"answer",e)},expression:"question.answer"}})],1),t._v(" "),a("b-button",{attrs:{variant:"success",type:"submit"}},[t._v("\n      提交\n    ")])],1)],1)},staticRenderFns:[]};var gt=a("VU/8")(bt,_t,!1,function(t){a("dzWU")},"data-v-719fd10a",null).exports,wt={name:"Examination",props:{id:{type:[String,Number],required:!0,default:0}},data:function(){return{paper:null,answer:[],modal_show:!0,record:null,EULA:!1,second_left:0,interval:null,finished:!1}},computed:{loading:function(){return!1===this.paper?"试卷加载出错或无此试卷":null===this.paper?"正在初始化试卷，请稍后 ...":""},countdown:function(){var t=this.second_left%60;return Math.floor(this.second_left/60)+":"+(t<9?"0"+t:t)}},created:function(){var t=this;/^[1-9][0-9]*$/.test(this.id)?_.get("/bank/paper/"+this.id,{params:{include:"questions"}}).then(function(e){return t.init(e.data)}).catch(function(e){console.error(e),t.paper=!1,t.$store.dispatch("except",e)}):(this.$store.dispatch("except","试卷编号错误"),this.$router.push({name:"Paper"}))},methods:{init:function(t){this.paper=t,this.second_left=60*t.time_limit,this.answer.fill(null,0,t.questions.length)},complete:function(){var t=this;clearInterval(this.interval),_.post("/record/answer/"+this.record.id,{record:this.record.id,answers:this.answer}).then(function(){t.finished=!0}).catch(function(e){return t.$store.dispatch("except",e)})},ELUA_accepted:function(){var t=this;this.EULA=!0,_.post("/record/examination",{paper:this.paper.id}).then(function(e){t.record=e.data}),this.startCountDown()},ELUA_refused:function(){this.$router.push({name:"Home"})},startCountDown:function(){var t=this;0!==this.second_left&&(this.interval=setInterval(function(){t.second_left>0?t.second_left--:t.complete()},1e3))}}},xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.paper?a("main",[a("b-card",{staticClass:"count-down",attrs:{size:"sm",header:"剩余时间"}},[a("h6",[t._v("\n      "+t._s(t.countdown)+"\n    ")]),t._v(" "),a("div",{staticClass:"w-100"}),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"before-submit",expression:"'before-submit'"}],staticClass:"mt-2",attrs:{size:"sm",variant:"outline-danger"}},[t._v("\n      交卷\n    ")])],1),t._v(" "),a("b-card",[a("h2",{staticClass:"m-2 card-title text-capitalize text-center"},[t._v(t._s(t.paper.title))]),t._v(" "),a("b-row",[a("b-col",{attrs:{cols:"6"}},[t.paper.time_limit?a("h5",{staticClass:"m-2 card-subtitle text-muted text-left"},[t._v("\n          考试时限 :"),a("span",{staticClass:"text-danger"},[t._v(t._s(t.paper.time_limit)+" 分钟")])]):a("h5",{staticClass:"m-2 card-subtitle text-muted text-left"},[t._v("\n          无时间限制\n        ")])]),t._v(" "),a("b-col",{attrs:{cols:"6"}},[t.record?a("h6",{staticClass:"m-2 text-capitalize text-muted text-right"},[t._v("\n          考试记录 :"+t._s(t.record.id)+"\n        ")]):t._e(),t._v(" "),t.record?a("h6",{staticClass:"m-2 text-muted text-right"},[t._v("\n          开始时间 "+t._s(t.record.started)+"\n        ")]):t._e()])],1),t._v(" "),a("b-form",{on:{submit:function(e){return e.preventDefault(),t.complete(e)}}},[t._l(t.paper.questions.data,function(e,n){return a("b-row",{key:n},[a("b-col",{attrs:{cols:"1"}},[a("p",[t._v("第 "+t._s(n+1)+" 题")]),t._v(" "),a("p",[a("small",[t._v(t._s(e.tag.title))])]),t._v(" "),a("p",[a("small",[t._v("本题 "+t._s(e.score)+"分")])])]),t._v(" "),a("b-col",[a("b-form-group",{attrs:{id:"question-"+n+"-group",label:e.title}},[e.tag.meta?e.tag.meta.multiple?a("b-form-checkbox-group",{attrs:{name:"question-options-"+n,options:e.options,stacked:""},model:{value:t.answer[n],callback:function(e){t.$set(t.answer,n,e)},expression:"answer[key]"}}):a("b-form-radio-group",{attrs:{name:"question-options-"+n,options:e.options,stacked:""},model:{value:t.answer[n],callback:function(e){t.$set(t.answer,n,e)},expression:"answer[key]"}}):a("b-form-textarea",{attrs:{name:"question-options-"+n,rows:"3","max-rows":"5"},model:{value:t.answer[n],callback:function(e){t.$set(t.answer,n,e)},expression:"answer[key]"}})],1)],1)],1)}),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"before-submit",expression:"'before-submit'"}],attrs:{variant:"danger"}},[t._v("\n        完成考试，交卷\n      ")])],2)],1),t._v(" "),a("b-modal",{attrs:{id:"before-exam",title:"请仔细阅读以下提示","ok-title":"开始考试","ok-variant":"success","cancel-title":"取消","cancel-variant":"danger",size:"lg",centered:"","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{ok:t.ELUA_accepted,cancel:t.ELUA_refused},model:{value:t.modal_show,callback:function(e){t.modal_show=e},expression:"modal_show"}},[a("h4",[t._v(" 试卷名 : "),a("b",[t._v(t._s(t.paper.title))])]),t._v(" "),a("h5",{staticClass:"text-muted"},[t._v("请您阅读以下提示")]),t._v(" "),a("ol",{attrs:{id:"notice"}},[a("li",{staticClass:"m-1"},[a("span",{staticClass:"text-danger"},[t._v("1. 若您未按规定导致出现问题，后果自负")])]),t._v(" "),a("li",{staticClass:"m-1"},[t._v("2. 如果您点击 “取消” 将会跳转到您的首页")]),t._v(" "),a("li",{staticClass:"m-1"},[t._v("3. 考试一旦开始，便会产生一条 "),a("b",[t._v(" 不能 ")]),t._v(" 修改或删除的考试记录")]),t._v(" "),a("li",{staticClass:"m-1"},[t._v('4. 在您点击 “开始考试" 按钮后，考试开始，并开始倒计时')]),t._v(" "),a("li",{staticClass:"m-1"},[t._v("5. 倒计时不可暂停，倒计时结束后强制交卷")]),t._v(" "),a("li",{staticClass:"m-1"},[t._v("6. 点击倒计时下方的 “交卷按钮” 可以提前交卷")]),t._v(" "),a("li",{staticClass:"m-1"},[t._v("7. 交卷后 "),a("b",[t._v("不能")]),t._v(" 修改试卷")]),t._v(" "),a("li",{staticClass:"m-1"},[t._v("8. 因技术原因，"),a("b",[t._v("只有客观题计入入总分")]),t._v("，主观题不计入总分")]),t._v(" "),a("li",{staticClass:"m-1"},[t._v("9. 祝您考试愉快")])])]),t._v(" "),a("b-modal",{attrs:{id:"before-submit",title:"提示","ok-title":"确定提交","ok-variant":"success","cancel-title":"取消","cancel-variant":"danger",size:"bg",centered:"","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{ok:t.complete}},[a("h4",{staticClass:"text-danger text-center"},[t._v("\n      提交试卷后不可修改，确认提交吗?\n    ")])]),t._v(" "),a("b-modal",{attrs:{id:"after-submit",title:"提示","ok-title":"查看结果","ok-variant":"primary","cancel-title":"返回首页","cancel-variant":"default",size:"sm",centered:"","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{ok:function(e){t.$router.push({name:"Record",params:{id:t.record.id}})},cancel:function(e){t.$router.push({name:"Home"})}},model:{value:t.finished,callback:function(e){t.finished=e},expression:"finished"}},[t._v("\n    考试已结束，您填写的答案已提交\n  ")])],1):a("b-card",{attrs:{align:"center"}},[t._v("\n  "+t._s(t.loading)+"\n")])},staticRenderFns:[]};var kt=a("VU/8")(wt,xt,!1,function(t){a("TEaD")},"data-v-09c94479",null).exports,yt={name:"Record",props:{id:{type:String,required:!0,default:""}},data:function(){return{record:null}},computed:{load:function(){return!1===this.record?"考试记录加载失败":"正在加载考试记录 , 请稍后"},identification:function(){return("id: "+this.record.id).toUpperCase()+"<br> 因技术问题，主观题不计入总分"}},created:function(){var t=this;_.get("/record/examination/"+this.id,{params:{include:["answer_record","paper.user","paper.questions"].join(",")}}).then(function(e){t.record=e.data}).catch(function(e){return t.$store.dispatch("except",e)})},methods:{question:function(t){return this.record.paper.questions.data[t]},score:function(t){return t.meta.origin_type?" ，得分 "+t.score+" 分":""},variant:function(t){return t.meta.origin_type?t.correctness?"success":"danger":"secondary"},answer:function(t){return t instanceof Array?t.join(" , "):t},hash:function(t){var e=0,a=t.length,n=0;if(a>0)for(;n<a;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e},option_variant:function(t,e){var a="wrong-option",n=e.answer,r=e.meta.origin_answer;if(r instanceof Array){if(r.indexOf(t)>=0)return n.indexOf(t)>=0?"correct-option":a;if(n.indexOf(t)>=0)return a}else{if(t===r)return"correct-option";if(t===n)return a}return""}}},qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.record?a("b-card",{attrs:{"sub-title":t.identification,title:"考试记录"}},[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("h5",{staticClass:"text-center"},[t._v("\n        总览\n      ")]),t._v(" "),a("table",{staticClass:"table table-bordered table-striped"},[a("thead",[a("tr",[a("th",[t._v("分数")]),t._v(" "),a("th",[t._v("开始时间")]),t._v(" "),a("th",[t._v("结束时间")]),t._v(" "),a("th",[t._v("试卷标题")]),t._v(" "),a("th",[t._v("出题人")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v(t._s(t.record.score)+"/"+t._s(t.record.meta.full_score))]),t._v(" "),a("td",[t._v(t._s(t.record.created))]),t._v(" "),a("td",[t._v(t._s(t.record.finished))]),t._v(" "),a("td",[t._v(t._s(t.record.paper.title))]),t._v(" "),a("td",[t._v(t._s(t.record.paper.user.name))])])])])])],1),t._v(" "),t._l(t.record.answer_record.data,function(e,n){return a("b-card",{key:n,staticClass:"mb-2",attrs:{header:"<b class='mr-2'>"+t.question(n).tag.title+"</b>  本题 "+e.meta.origin_score+" 分"+t.score(e),"border-variant":t.variant(e),"header-bg-variant":t.variant(e)}},[a("h5",[t._v(t._s(t.question(n).title))]),t._v(" "),a("dl",[a("b-row",[a("dt",{staticClass:"col-2"},[t._v("正确答案")]),t._v(" "),a("dd",{staticClass:"col-10"},[t._v(t._s(t.answer(e.meta.origin_answer)))])]),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("dt",{staticClass:"col-2"},[t._v("提交的答案")]),t._v(" "),a("dd",{staticClass:"col-10"},[t._v(t._s(t.answer(e.answer)))])])],1),t._v(" "),e.meta.origin_type?a("div",[a("ul",t._l(t.question(n).options,function(n){return a("li",{key:t.hash(n.text),class:["m-1",t.option_variant(n.value,e)]},[a("b",[t._v(t._s(n.value)+". ")]),t._v(t._s(n.text)+"\n        ")])}))]):t._e()])})],2):a("b-card",[t._v("\n  "+t._s(t.load)+"\n")])},staticRenderFns:[]};var Ct=a("VU/8")(yt,qt,!1,function(t){a("Dqwv")},"data-v-4ca1f0e9",null).exports,Et={name:"Notice",props:{id:{type:[String,Number],required:!0,default:0}},data:function(){return{notice:null}},computed:{load:function(){return null===this.notice?"正在加载":this.notice?void 0:"加载失败"}},created:function(){var t=this;_.get("/notice/"+this.id,{params:{include:["author","body"].join(",")}}).then(function(e){t.notice=e.data}).catch(function(e){t.notice=!1,t.$store.dispatch("except",e)})}},$t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.notice?a("b-card",{attrs:{"img-src":t.notice.image,title:t.notice.title,"sub-title":t.notice.excerpt,"img-bottom":""}},[a("div",{domProps:{innerHTML:t._s(t.notice.body.text)}}),t._v(" "),a("div",{staticClass:"text-right"},[a("b-img",{attrs:{src:t.notice.author.avatar,width:"45px"}}),t._v(" "),a("div",[t._v(t._s(t.notice.author.name))]),t._v(" "),a("div",[t._v(t._s(t.notice.published))])],1)]):a("b-card",[t._v("\n  "+t._s(t.load)+"\n")])},staticRenderFns:[]};var Rt=a("VU/8")(Et,$t,!1,function(t){a("G72p")},"data-v-625863f7",null).exports,St={name:"Search",components:{search:E},props:{q:{type:String,default:""}},data:function(){return{keywords:this.q}},methods:{scrollTop:function(){window.scroll(0,0)}}},At={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"sr-only"},[t._v("搜索")]),t._v(" "),a("div",{staticClass:"input-group col-8 offset-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],staticClass:"form-control rounded-0",attrs:{id:"search-input",placeholder:"找份卷子做做..."},domProps:{value:t.keywords},on:{input:function(e){e.target.composing||(t.keywords=e.target.value)}}}),t._v(" "),a("span",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-dark btn-lg rounded-0",attrs:{type:"submit"}},[t._v("搜索")])])])])]),t._v(" "),a("div",{staticClass:"w-100"}),t._v(" "),a("b-col",[a("h5",[t._v("题目")]),t._v(" "),a("ais-index",{attrs:{query:t.keywords,"app-id":"T2TA5RNB5Y","api-key":"9568ab295bfd78bcb6fefb2be99d33a6","index-name":"dev_questions"}},[a("ais-results",{scopedSlots:t._u([{key:"default",fn:function(t){var e=t.result;return[a("b-card",{staticClass:"mt-2"},[a("router-link",{staticClass:"card-title text-dark",attrs:{to:{name:"Question",params:{id:e.question_id}}}},[a("ais-highlight",{attrs:{result:e,"attribute-name":"question"}})],1)],1)]}}])}),t._v(" "),a("ais-no-results",{scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          没有关于 "),a("b",[t._v(t._s(e.query))]),t._v(" 的搜索结果\n        ")]}}])}),t._v(" "),a("ais-pagination",{staticClass:"mt-3",attrs:{"class-names":{"ais-pagination":"pagination","ais-pagination__link":"page-link","ais-pagination__item":"page-item","ais-pagination__item--active":"active","ais-pagination__item--disabled":"disabled"}},on:{"page-change":t.scrollTop}})],1)],1),t._v(" "),a("b-col",[a("h5",[t._v("试卷")]),t._v(" "),a("ais-index",{attrs:{query:t.keywords,"app-id":"T2TA5RNB5Y","api-key":"9568ab295bfd78bcb6fefb2be99d33a6","index-name":"dev_papers"}},[a("ais-results",{scopedSlots:t._u([{key:"default",fn:function(t){var e=t.result;return[a("b-card",{staticClass:"mt-2"},[a("router-link",{staticClass:"card-title text-dark",attrs:{to:{name:"Paper",params:{id:e.paper_id}}}},[a("ais-highlight",{attrs:{result:e,"attribute-name":"title"}})],1)],1)]}}])}),t._v(" "),a("ais-no-results",{scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          没有关于 "),a("b",[t._v(t._s(e.query))]),t._v(" 的搜索结果\n        ")]}}])}),t._v(" "),a("ais-pagination",{staticClass:"mt-3",attrs:{"class-names":{"ais-pagination":"pagination","ais-pagination__link":"page-link","ais-pagination__item":"page-item","ais-pagination__item--active":"active","ais-pagination__item--disabled":"disabled"}},on:{"page-change":t.scrollTop}})],1)],1)],1)},staticRenderFns:[]};var zt=a("VU/8")(St,At,!1,function(t){a("8wB9")},"data-v-63027cdc",null).exports;n.a.use(r.a);var Tt=new r.a({mode:"history",routes:[{path:"/",name:"Index",component:S},{path:"/register",name:"Register",component:N},{path:"/sign-in",alias:"/login",name:"Sign-in",component:F},{path:"/home",name:"Home",component:W,meta:{auth:!0}},{path:"/notice/:id",name:"Notice",component:Rt,props:!0,meta:{auth:!0}},{path:"/search",name:"Search",component:zt,props:function(t){return t.query}},{path:"/user",component:z,redirect:{name:"Profile"},meta:{auth:!0},children:[{path:"profile",name:"Profile",component:j},{path:"avatar",name:"Avatar",component:Y}]},{path:"/bank",component:ot,redirect:{name:"Paper"},meta:{auth:!0},children:[{path:"question-tag/:slug?",name:"QuestionTag",component:mt,props:!0},{path:"question/:id?",name:"Question",component:at,props:!0},{path:"paper/:id?",name:"Paper",component:it},{path:"new-paper",name:"New-Paper",component:vt},{path:"new-question",name:"New-Question",component:gt}]},{path:"/examination",redirect:{name:"Examination"},component:z,props:!0,meta:{auth:!0},children:[{path:":id",name:"Examination",component:kt,props:!0},{path:"/record/:id",name:"Record",component:Ct,props:!0}]}]});Tt.beforeEach(function(t,e,a){for(var n=null,r=0;r<q.length&&!(n=q[r](t,e));r++);n?a(n):a()});var Pt=Tt,Ut={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("footer",{staticClass:"footer"},[e("div",{staticClass:"container"},[e("p",{staticClass:"text-muted text-center"},[this._v("一切都是命运石之门的选择")])])])])},staticRenderFns:[]};var Mt=a("VU/8")({name:"ContentFooter"},Ut,!1,function(t){a("aq1M")},"data-v-e38b8a26",null).exports,Nt={name:"Navbar",data:function(){return{brand:"考拉",index:!1,variant:"fate",path:this.$route.path,key:"",search:!1}},computed:V()({},Object(i.c)(["name","authenticated","avatar"])),watch:{"$route.path":function(t){this.index="/"===t,this.variant="/"===t?"fate":"light"}},created:function(){this.index="/"===this.path,this.variant="/"===this.path?"fate":"light"},methods:V()({},Object(i.b)({signOut:"revoke"}))},Dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{attrs:{variant:t.variant,toggleable:"md",type:"light",fixed:"top"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),t.index?t._e():a("b-navbar-brand",{attrs:{to:{name:"Index"}}},[t._v("\n    "+t._s(t.brand)+"\n  ")]),t._v(" "),a("b-collapse",{attrs:{id:"nav_collapse","is-nav":""}},[t.index?t._e():a("b-navbar-nav",[a("b-nav-item",{attrs:{to:{name:"Paper"}}},[t._v("我要答题")]),t._v(" "),a("b-nav-item",{attrs:{to:{name:"New-Question"}}},[t._v("我要出题")]),t._v(" "),a("b-nav-item",{attrs:{to:{name:"Examination",params:{id:Math.ceil(200*Math.random())}}}},[t._v("试试手气\n      ")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[t.index||"Search"===t.$route.name?t._e():a("b-nav-form",[a("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",type:"text",placeholder:"搜索"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}}),t._v(" "),a("b-button",{staticClass:"my-2 my-sm-0",attrs:{to:{name:"Search",query:{q:t.key}},size:"sm",type:"submit"}},[t._v("\n          搜索\n        ")])],1)],1),t._v(" "),t.authenticated?a("b-navbar-nav",{staticClass:"ml-2"},[a("b-nav-item-dropdown",{attrs:{right:""}},[a("template",{slot:"button-content"},[a("img",{staticClass:"avatar rounded",attrs:{src:t.avatar,alt:t.name}})]),t._v(" "),a("b-dropdown-item",{attrs:{to:{name:"Home"}}},[t._v(" 主页")]),t._v(" "),a("b-dropdown-item",{attrs:{to:{name:"Profile"}}},[t._v(" 个人信息")]),t._v(" "),a("b-dropdown-item",{on:{click:t.signOut}},[t._v(" 登出")])],2)],1):a("b-navbar-nav",{staticClass:"ml-2"},[a("b-nav-item",{staticClass:"border-right",attrs:{to:{name:"Sign-in"}}},[t._v("登录\n      ")]),t._v(" "),a("b-nav-item",{attrs:{to:{name:"Register"}}},[t._v("\n        注册\n      ")])],1)],1)],1)},staticRenderFns:[]};var Ot=a("VU/8")(Nt,Dt,!1,function(t){a("8Rb9")},"data-v-18bcee98",null).exports,Ft={name:"Message",computed:V()({},Object(i.d)({messages:function(t){return t.message.messages}}))},It={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"messages"}},this._l(this.messages,function(t,a){return e("alert",{key:a,staticClass:"mb-1 mt-1 mr-2",attrs:{"data-x":a,alerts:t}})}))},staticRenderFns:[]};var Vt={name:"App",components:{"content-footer":Mt,navbar:Ot,messages:a("VU/8")(Ft,It,!1,function(t){a("cSs5")},"data-v-5cfe6c3e",null).exports}},Lt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pt-3",attrs:{id:"app"}},[e("navbar"),this._v(" "),e("messages"),this._v(" "),e("b-container",[e("router-view")],1),this._v(" "),e("content-footer")],1)},staticRenderFns:[]};var Ht=a("VU/8")(Vt,Lt,!1,function(t){a("LghQ")},null,null).exports,jt=a("e6fC"),Qt=(a("Jmt5"),a("9M+g"),a("7Y9u"));a("zD2r");n.a.use(jt.a),n.a.use(Qt.a),n.a.config.devtools=!0,n.a.config.productionTip=!0,n.a.component("alert",ut);new n.a({el:"#app",store:y,router:Pt,components:{App:Ht},template:"<App/>"})},h9HQ:function(t,e){},hDbs:function(t,e){},jCjH:function(t,e){},oMJ1:function(t,e){},pET9:function(t,e){},xTgz:function(t,e){},ykR9:function(t,e,a){"use strict";var n={},r={name:"icon",props:{name:{type:String,validator:function(t){return t?t in n||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?n[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,a=t.height;return Math.max(e,a)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,a,n){var r="fa-"+(i++).toString(16);return e[n]=r,' id="'+r+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,a,n,r){var i=a||r;return i&&e[i]?"#"+e[i]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,a=0;this.$children.forEach(function(t){e=Math.max(e,t.width),a=Math.max(a,t.height)}),this.childrenWidth=e,this.childrenHeight=a,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(a-t.height)/2})}},register:function(t){for(var e in t){var a=t[e];a.paths||(a.paths=[]),a.d&&a.paths.push({d:a.d}),a.polygons||(a.polygons=[]),a.points&&a.polygons.push({points:a.points}),n[e]=a}},icons:n},i=870711;var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,n){return a("path",t._b({key:"path-"+n},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,n){return a("polygon",t._b({key:"polygon-"+n},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[a("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},staticRenderFns:[]};var o=a("VU/8")(r,s,!1,function(t){a("hDbs")},null,null);e.a=o.exports},zD2r:function(t,e){},zj2Q:function(t,e){}},["eslX"]);
//# sourceMappingURL=app.5b28dcfea18f664b509d.js.map