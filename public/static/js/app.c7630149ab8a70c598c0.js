webpackJsonp([1],{"1/oy":function(t,e){},"5zVm":function(t,e){},"9M+g":function(t,e){},DEim:function(t,e){},DT5i:function(t,e){},Dqwv:function(t,e){},G72p:function(t,e){},HJYo:function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},LPMm:function(t,e){},LghQ:function(t,e){},RgVg:function(t,e){},RyIb:function(t,e){},SFiu:function(t,e){},TEaD:function(t,e){},YkUL:function(t,e){},aq1M:function(t,e){},cSs5:function(t,e){},dzWU:function(t,e){},eslX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r=n("/ocq"),i=n("NYxO"),s=n("//Fk"),o=n.n(s),c=n("M4fF"),l=n.n(c),u=n("lbHh"),d=n.n(u),p="Token";var f={set:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;return d.a.set(e,t,{expires:n})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return d.a.get(t)},revoke:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return d.a.remove(t)}},m=n("mtWM"),h=n.n(m),v={url:{app:"https://qa.dev",api:"https://api.qa.dev"}},b=h.a.create({baseURL:v.url.api,headers:{Accept:"application/prs.qa.v1+json"}});b.interceptors.request.use(function(t){return y.getters.authorization&&(t.headers.Authorization=y.getters.authorization),t},function(t){console.error(t)}),b.interceptors.response.use(function(t){return o.a.resolve(t)},function(t){401===t.response.status&&y.dispatch("revoke").then(St.push({name:"Sign-in"}));var e=[],n=t.response.data;return void 0===n.errors?e.push(n.message):e=function t(e){if(l.a.isObject(e)||l.a.isArray(e)){var n=[];return l.a.forEach(e,function(e){n=n.concat(t(e))}),n}return[e]}(n.errors),o.a.reject(e)});var _=b,g={state:{token:f.get()?f.get():"",expiration:f.get("expiration")?f.get("expiration"):"",type:"Bearer"},getters:{token:function(t){return t.token},authorization:function(t){return t.type+" "+t.token},expiration:function(t){return t.expiration},authenticated:function(t){return!l.a.isEmpty(t.token)}},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_EXPIRATION:function(t,e){t.expiration=e},CLEAR_AUTHORIZATION:function(t){t.expiration="",t.token=""}},actions:{authorize:function(t,e){t.commit;var n=t.dispatch;return new o.a(function(t,a){_.post("authorization",e).then(function(e){n("update",e.data),n("addMessage",{message:"登录成功",type:"success"}),t()}).catch(function(t){console.log("Error in authorization"),console.log(t),a(t)})})},revoke:function(t){var e=t.commit,n=t.dispatch;return new o.a(function(t){e("CLEAR_AUTHORIZATION"),n("deleteProfile"),f.revoke(),_.delete("authorization").then(function(){t()})})},update:function(t,e){var n=t.commit,a=t.dispatch,r=e.token,i=e.expiration;return new o.a(function(t,e){n("SET_TOKEN",r),n("SET_EXPIRATION",i),f.set(r),f.set(i,"expiration"),a("getProfile").then(function(){t()}).catch(function(t){a("addMessage",{type:"danger",message:"用户信息更新失败，请登录"}),e(t)})})}}},w=n("fZjL"),x=n.n(w),k={authorization:g,profile:{state:{id:"",name:"",email:"",avatar:"",role:0,created:"",updated:"",introduction:""},getters:{id:function(t){return t.id},name:function(t){return t.name},email:function(t){return t.email},avatar:function(t){return 0===t.avatar.length?v.appUrl+"storage/users/default.png":t.avatar},role:function(t){return t.role},created:function(t){return t.created},updated:function(t){return t.updated},introduction:function(t){return t.introduction},profile:function(t){var e=t.id,n=t.name,a=t.email,r=t.avatar,i=t.role,s=t.created,o=t.updated,c=t.introduction;return{id:e,name:n,email:a,avatar:0===r.length?v.appUrl+"storage/users/default.png":r,role:i,created:s,updated:o,introduction:c}}},mutations:{SET_EMAIL:function(t,e){l.a.isEmpty(e)||(t.email=e)},SET_NAME:function(t,e){l.a.isEmpty(e)||(t.name=e)},SET_AVATAR:function(t,e){l.a.isEmpty(e)||(t.avatar=e)},SET_INTRODUCTION:function(t,e){l.a.isEmpty(e)||(t.introduction=e)},SET_PROFILE:function(t,e){var n=e.id,a=e.name,r=e.email,i=e.avatar,s=e.role,o=e.atom,c=o.created,l=o.updated,u=o.introduction;t.id=n,t.name=a,t.email=r,t.avatar=i,t.role=s,t.created=c,t.updated=l,t.introduction=u},CLEAR_PROFILE:function(t){x()(t).forEach(function(e){t[e]=""})}},actions:{getProfile:function(t){var e=t.commit;return new o.a(function(t,n){_.get("/user",{params:{include:"atom"}}).then(function(n){e("SET_PROFILE",n.data),t()}).catch(function(t){n(t)})})},updateProfile:function(t,e){var n=t.commit,a=t.dispatch;return new o.a(function(t,r){var i={};l.a.each(e,function(t,e){l.a.isEmpty(t)||(i[e]=t)}),_.patch("/user",i).then(function(t){n("SET_NAME",e.name),n("SET_INTRODUCTION",e.introduction),a("success","您的个人信息已更新完毕"),console.log(t)}).catch(function(t){a("except","更新个人信息时出现问题"),console.log(t),r(t)})})},deleteProfile:function(t){(0,t.commit)("CLEAR_PROFILE")},updateAvatar:function(t,e){var n=t.commit,a=t.dispatch;return new o.a(function(t,r){var i=new FormData;i.append("type","avatar"),i.append("image",e),_.post("image",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){n("SET_AVATAR",e.data.path),t(e)}).catch(function(t){l.a.forEach(t,function(t){a("except",t)}),r(t)})})}}},message:{state:{index:0,messages:[]},getters:{messages:function(t){return t.messages}},mutations:{ADD_MESSAGE:function(t,e){t.messages.push(e)},CLEAR_MESSAGE:function(t){t.messages.length=0},INCREASE_INDEX:function(t){t.index+=1},READ:function(t,e){t.messages[e].read=!0}},actions:{addMessage:function(t,e){var n=t.commit,a=t.state,r=e.message,i=e.type,s=e.expire,o=void 0===s?10:s;n("ADD_MESSAGE",{index:a.index,type:i,message:r,expire:o,read:!1,local:!1})},read:function(t,e){var n=t.commit;return new o.a(function(t){n("READ",e),t()})},except:function(t,e){(0,t.commit)("ADD_MESSAGE",{index:t.state.index,type:"danger",message:e,expire:10,read:!1,local:!1})},success:function(t,e){(0,t.commit)("ADD_MESSAGE",{index:t.state.index,type:"success",message:e,expire:10,read:!1,local:!1})}}}};n("ABOc");a.a.use(i.a);var y=new i.a.Store({modules:k},{authentication:function(t){return t.authorization.getters.authorization},authenticated:function(t){return t.authorization.getters.authenticated},token:function(t){return t.authorization.getters.token},profile:function(t){return t.profile.getters.profile},avatar:function(t){return t.profile.getters.avatar},role:function(t){return t.profile.getters.role},name:function(t){return t.profile.getters.name},messages:function(t){return t.message.getters.messages}});var q=[function(){y.getters.authenticated&&0===y.getters.role&&y.dispatch("getProfile")},function(t,e){var n=["/register","/sign-in","/login"];if(y.getters.authenticated&&n.includes(t.fullPath))return n.includes(e.fullPath)?{path:"/"}:{path:e.fullPath}},function(t,e){if(t.matched.some(function(t){return t.meta.auth})&&!y.getters.authenticated)return{name:"Sign-in",query:{redirect:t.fullPath}}}],C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-form",{staticClass:"page-center mb-3",attrs:{inline:""}},[e("div",{staticClass:"form-group col-12 input-group-lg"},[e("label",{staticClass:"sr-only",attrs:{for:"search-input"}},[this._v("搜索")]),this._v(" "),e("input",{staticClass:"form-control offset-2 col-7 mt-4 mb-4 rounded-0",attrs:{id:"search-input",type:"text",name:"search-input",placeholder:"找份卷子做做..."}}),this._v(" "),e("button",{staticClass:"btn btn-dark btn-lg rounded-0 col-1"},[this._v("搜索")])])])},staticRenderFns:[]};var E={name:"Index",components:{search:n("VU/8")({name:"Search"},C,!1,function(t){n("qPQx")},"data-v-543f0291",null).exports},data:function(){return{search:""}}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("h1",{staticClass:"mt-5 title text-center"},[this._v("考拉")]),this._v(" "),e("search"),this._v(" "),e("div",{staticClass:"text-center"},[e("router-link",{staticClass:"btn btn-dark rounded-0 col-2 mr-5",attrs:{to:{name:"Examination",params:{id:Math.ceil(200*Math.random())}}}},[this._v("\n          手气不错\n        ")]),this._v(" "),e("router-link",{staticClass:"btn btn-dark rounded-0 col-2",attrs:{to:{name:"Paper"}}},[this._v("\n          我要出题\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var R=n("VU/8")(E,$,!1,function(t){n("hH4u")},"data-v-44abaf04",null).exports,S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]};var z=n("VU/8")({name:"Blank"},S,!1,function(t){n("5zVm")},"data-v-4758a80e",null).exports,A=n("woOf"),T=n.n(A),P={name:"Register",data:function(){return{alerts:[],captcha:{hit:"请输入验证码以确认您不是机器人",image:""},errors:{name:"",email:"",password:"",captcha:""},form:{name:"",email:"",password:"",passwordRepeat:"",captcha:{key:"",code:""}}}},computed:{nameStates:function(){return""===this.errors.name&&null},emailStates:function(){return""===this.errors.email&&null},passwordStates:function(){return""===this.form.password?null:this.form.password.length>=6},captchaStates:function(){return""===this.errors.captcha&&null},passwordRepeatStates:function(){return""===this.form.passwordRepeat||this.form.passwordRepeat.length<6?null:this.form.passwordRepeat===this.form.password}},methods:{validate:function(t){t.preventDefault(),this.form.password.length>=6&&this.form.password===this.form.passwordRepeat&&""!==this.form.captcha.code&&this.register()},formReset:function(t){var e=this;t.preventDefault(),this.form.email="",this.form.password="",this.form.passwordRepeat="",this.show=!1,this.$nextTick(function(){e.show=!0})},getCaptcha:function(){var t=this;""===this.form.email?this.errors.email="请先填写电子邮件":h.a.post("/captchas",{email:this.form.email,name:this.form.name}).then(function(e){t.form.captcha.key=e.data.captcha_key,t.captcha.hit+="  Hit:验证码将于"+e.data.expired_at+"过期",t.captcha.image=e.data.captcha_image_content}).catch(function(t){console.log(t)})},register:function(){var t=this;h.a.post("/user",this.form).then(function(e){t.$store.dispatch("update",e.data).then(function(){t.$store.dispatch("addMessage",{message:"登录成功",type:"success"}),t.$router.push("Home")}).catch(function(){t.alerts.push({type:"danger",message:"自动登录时发生错误，"})})}).catch(this.errorHandler)},errorHandler:function(t){this.errors=T()(this.errors,t.response.data.errors)}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",{staticClass:"justify-content-md-center"},[n("b-col",{attrs:{cols:"8"}},[t._l(t.alerts,function(t,e,a){return n("alert",{key:a,attrs:{alerts:t}})}),t._v(" "),n("b-card",{attrs:{id:"register",title:"注册","sub-title":"下一站，考拉"}},[n("b-form",{on:{submit:t.validate,reset:t.formReset}},[n("b-form-group",{attrs:{id:"name-group",label:"昵称","label-for":"name",description:"选一个名字"}},[n("b-form-input",{attrs:{id:"name",state:t.nameStates,type:"text",required:"","aria-describedby":"name-feedback",placeholder:"请填写您的昵称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("b-form-invalid-feedback",{attrs:{id:"name-feedback"}},t._l(t.errors.name,function(e,a,r){return n("span",{key:r},[t._v(t._s(e))])}))],1),t._v(" "),n("b-form-group",{attrs:{id:"email-group",label:"电子邮箱","label-for":"email",description:"注意：您在注册后将不能修改邮箱"}},[n("b-form-input",{attrs:{id:"email",state:t.emailStates,type:"email",required:"","aria-describedby":"email-feedback",placeholder:"请填写您的电子邮件"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),n("b-form-invalid-feedback",{attrs:{id:"email-feedback"}},t._l(t.errors.email,function(e,a,r){return n("span",{key:r},[t._v(t._s(e))])}))],1),t._v(" "),n("b-form-group",{attrs:{id:"password-group",label:"Password","label-for":"password",description:"请选择一个强密码，至少6个字符"}},[n("b-form-input",{attrs:{id:"password",state:t.passwordStates,type:"password",required:"","aria-describedby":"password-feedback",placeholder:"请在此填写密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),n("b-form-invalid-feedback",{attrs:{id:"password-feedback"}},[t._v("\n              密码需要至少6个字符\n            ")])],1),t._v(" "),n("b-form-group",{attrs:{id:"password-repeat-group",label:"确认密码","label-for":"password",description:"再次输入密码以进行确认"}},[n("b-form-input",{attrs:{id:"password-repeat",state:t.passwordRepeatStates,type:"password",required:"","aria-describedby":"password-repeat-feedback",placeholder:"请在此再次输入密码以进行确认"},model:{value:t.form.passwordRepeat,callback:function(e){t.$set(t.form,"passwordRepeat",e)},expression:"form.passwordRepeat"}}),t._v(" "),n("b-form-invalid-feedback",{attrs:{id:"password-repeat-feedback"}},[t._v("\n              您两次输入的密码不一致\n            ")])],1),t._v(" "),n("b-form-group",{attrs:{id:"captcha-group",description:t.captcha.hit,label:"验证码","label-for":"captcha"}},[n("b-row",[n("b-col",{attrs:{cols:"9"}},[n("b-form-input",{attrs:{id:"captcha",state:t.captchaStates,typt:"text",required:"",placeholder:"请输入验证码","aria-describedby":"captcha-feedback"},model:{value:t.form.captcha.code,callback:function(e){t.$set(t.form.captcha,"code",e)},expression:"form.captcha.code"}}),t._v(" "),n("b-form-invalid-feedback",{attrs:{id:"captcha-feedback"}},[t._v("\n                  "+t._s(t.errors.captcha)+"\n                ")])],1),t._v(" "),n("b-col",{attrs:{cols:"3"}},[""===t.captcha.image?n("b-button",{on:{click:function(e){t.getCaptcha()}}},[t._v("点击获取验证码\n                ")]):n("b-img",{attrs:{src:t.captcha.image,fluid:""},on:{click:function(e){t.getCaptcha()}}})],1)],1)],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("注册\n          ")]),t._v(" "),n("b-button",{attrs:{typt:"reset",variant:"default"}},[t._v("重写\n          ")])],1)],1)],2)],1)],1)},staticRenderFns:[]};var D=n("VU/8")(P,U,!1,function(t){n("HJYo")},"data-v-d0fac04e",null).exports,M={name:"SignIn",data:function(){return{form:{email:"",password:""},alerts:[]}},computed:{passwordState:function(){return(""===this.form.password||this.form.password.length>=6)&&null}},methods:{formReset:function(t){var e=this;t.preventDefault(),this.form.email="",this.form.password="",this.show=!1,this.$nextTick(function(){e.show=!0})},clearAlerts:function(){this.alerts.length=0},authorization:function(t){var e=this;t.preventDefault(),this.form.password.length>=6&&this.$store.dispatch("authorize",this.form).then(function(){e.$router.push("Home")}).catch(function(t){e.clearAlerts(),e.form.password="",l.a.forEach(t,function(t,n){e.alerts.push({index:n,expire:10,type:"danger",message:t,local:!0})})})}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",{staticClass:"justify-content-md-center",attrs:{id:"sign-in"}},[n("b-col",{attrs:{cols:"8"}},[t._l(t.alerts,function(t,e,a){return n("alert",{key:a,attrs:{alerts:t}})}),t._v(" "),n("b-card",{attrs:{title:"登录","sub-title":"登录以进行下一步操作"}},[n("b-form",{on:{reset:t.formReset,submit:t.authorization}},[n("b-form-group",{attrs:{id:"email-group",label:"电子邮箱","label-for":"email",description:"请输入您在此注册的邮件"}},[n("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"请输入邮件"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"password-group",label:"密码","label-for":"password"}},[n("b-form-input",{attrs:{id:"password",state:t.passwordState,type:"password",required:"","aria-describedby":"password-feedback",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),n("b-form-invalid-feedback",{attrs:{id:"password-feedback"}},[t._v("\n              密码需要至少6个字符\n            ")])],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("登录\n          ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"default"}},[t._v("清空\n          ")])],1)],1)],2)],1)],1)},staticRenderFns:[]};var F=n("VU/8")(M,O,!1,function(t){n("LPMm")},"data-v-47156b91",null).exports,N=n("Dd8w"),I=n.n(N),V={name:"Profile",data:function(){return{name:"",introduction:""}},computed:I()({},Object(i.c)(["profile"]),{introductionFeedback:function(){return this.introduction.length+"/50"},introductionState:function(){return 0===this.introduction.length?null:this.introduction.length<=50}}),methods:{update:function(){this.$store.dispatch("updateProfile",{name:this.name,introduction:this.introduction}).then(this.reset())},reset:function(){var t=this;this.name="",this.introduction="",this.show=!1,this.$nextTick(function(){t.show=!0})},redirectToAvatar:function(){this.$router.push({name:"Avatar"})}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-form",{on:{submit:function(e){return e.stopPropagation(),t.update(e)},reset:function(e){return e.stopPropagation(),t.reset(e)}}},[n("b-form-row",[n("b-col",{attrs:{cols:"8",offset:"2"}},[n("b-form-group",{attrs:{id:"id",horizontal:"",label:"用户 ID","label-for":"name","label-cols":"3","label-class":"text-sm-right"}},[n("b-input",{attrs:{id:"name",disabled:""},model:{value:t.profile.id,callback:function(e){t.$set(t.profile,"id",e)},expression:"profile.id"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"name-group",breakpoint:"md",horizontal:"",label:"用户名","labal-cols":"3","label-for":"name","label-class":"text-sm-right"}},[n("b-input",{attrs:{id:"name",placeholder:t.profile.name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"introduction",state:t.introductionState,"invalid-feedback":t.introductionFeedback,"valid-feedback":t.introductionFeedback,breakpoint:"md",horizontal:"",label:"自我简介","label-cols":"3","label-for":"name","label-class":"text-sm-right",description:"个人简介，请不要超过 50 个字"}},[n("b-form-textarea",{attrs:{id:"introduction",state:t.introductionState,placeholder:t.profile.introduction,rows:"3","max-rows":"6"},model:{value:t.introduction,callback:function(e){t.introduction=e},expression:"introduction"}})],1)],1),t._v(" "),n("div",{staticClass:"w-100"}),t._v(" "),n("b-col",{staticClass:"text-right",attrs:{cols:"2",offset:"2"}},[n("p",[t._v("头像")])]),t._v(" "),n("b-col",{attrs:{cols:"4"}},[n("b-img",{staticClass:"img-thumbnail",attrs:{src:t.profile.avatar,fluid:""},on:{click:t.redirectToAvatar}}),t._v(" "),n("p",{staticClass:"text-muted text-center mt-auto mb-auto"},[n("small",[t._v("点击更换头像")])])],1),t._v(" "),n("div",{staticClass:"w-100"}),t._v(" "),n("b-col",{attrs:{offset:"4"}},[n("b-button",{attrs:{size:"small",type:"submit",variant:"primary"}},[t._v("\n          提交\n        ")]),t._v(" "),n("b-button",{attrs:{size:"small",type:"reset",variant:"default"}},[t._v("\n          重置\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var H=n("VU/8")(V,L,!1,function(t){n("oMJ1")},"data-v-7ab4a74a",null).exports,j={name:"Avatar",data:function(){return{image:"",file:null}},computed:{avatar:function(){return 0===this.image.length?this.$store.getters.avatar:this.image},ready:function(){return null!==this.file}},methods:{select:function(){document.getElementById("image").click()},fileChanged:function(t){var e=this,n=t.target.files||t.dataTransfer.files;if(0!==n.length){var a=new FileReader;a.onload=function(t){e.image=t.target.result},a.readAsDataURL(n[0]),this.file=n[0]}},upload:function(){var t=this;this.$store.dispatch("updateAvatar",this.file).then(function(){t.$router.push({name:"Profile"})})}}},Q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",[n("b-col",[n("b-card",[n("b-col",{attrs:{cols:"6",offset:"3"}},[n("b-img",{attrs:{src:t.avatar,fluid:"",alt:"头像"}}),t._v(" "),n("div",{staticClass:"text-center btn-container mt-2"},[n("b-button",{attrs:{type:"button",variant:"default"},on:{click:t.select}},[t._v("\n            选择文件\n          ")]),t._v(" "),t.ready?n("b-button",{attrs:{type:"button",variant:"success"},on:{click:t.upload}},[t._v("\n            上传\n          ")]):t._e()],1),t._v(" "),n("form",[n("input",{attrs:{id:"image",hidden:"",type:"file",name:"image"},on:{change:t.fileChanged}})])],1)],1)],1)],1)},staticRenderFns:[]};var B=n("VU/8")(j,Q,!1,function(t){n("pET9")},"data-v-49d497ae",null).exports,J={name:"Dashboard",data:function(){return{notices:[]}},created:function(){var t=this;_.get("/notice").then(function(e){t.notices=e.data.data}).catch(function(e){return t.$store.dispatch("except",e)})}},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-5 pt-5"},[n("b-row",{attrs:{"align-h":"around"}},[n("b-col",{attrs:{cols:"3"}},[n("router-link",{staticClass:"btn btn-block btn-outline-light home-button new-exam border-dark rounded-0",attrs:{to:{name:"Paper"}}},[t._v("\n        去做题\n      ")])],1),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("router-link",{staticClass:"btn btn-block btn-outline-light home-button new-paper border-dark rounded-0",attrs:{to:{name:"New-Question"}}},[t._v("\n        去出题\n      ")])],1),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("router-link",{staticClass:"btn btn-block btn-outline-light home-button random-exam border-dark rounded-0",attrs:{to:{name:"Examination",params:{id:Math.ceil(200*Math.random())}}}},[t._v("\n        手气不错\n      ")])],1)],1),t._v(" "),n("b-row",{staticClass:"mt-5 pt-5",attrs:{"align-h":"center"}},[n("b-col",{attrs:{cols:"10"}},[n("b-card",{staticClass:"notice",attrs:{"no-body":"",header:"系统公告"}},[n("b-list-group",{attrs:{flush:""}},t._l(t.notices,function(e,a){return n("b-list-group-item",{key:a,attrs:{button:""},on:{click:function(n){t.$router.push({name:"Notice",params:{id:e.id}})}}},[t._v("\n            "+t._s(e.title)+" "),n("span",{staticClass:"float-right text-muted"},[t._v("发布时间: "+t._s(e.published))])])}))],1)],1)],1)],1)},staticRenderFns:[]};var W=n("VU/8")(J,G,!1,function(t){n("h9HQ")},"data-v-5f2d297a",null).exports,X={name:"Question",props:{question:{type:Object,required:!0,default:function(){return null}}},data:function(){return{fields:{value:"#",text:"选项内容"}}},computed:{subTitle:function(){var t=this.question;return t.user?t.user.name+" 创建于 "+t.created:null}},methods:{answer:function(t){return t instanceof Array?t.join(","):t}}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{staticClass:"mb-2 w-100",attrs:{"sub-title":t.subTitle}},[n("p",{staticClass:"text-info"},[t._v(t._s(t.question.tag.title))]),t._v(" "),n("p",{staticClass:"title mb-2"},[t._v(t._s(t.question.title))]),t._v(" "),n("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"detail-"+t.question.id,expression:"`detail-${question.id}`"}],attrs:{size:"sm",variant:"primary"}},[t._v("\n    查看选项\n  ")]),t._v(" "),n("b-collapse",{staticClass:"mt-3",attrs:{id:"detail-"+t.question.id}},[t.question.options?n("b-table",{attrs:{items:t.question.options,fields:t.fields,bordered:"",striped:"",hover:""}}):t._e(),t._v(" "),t.question.answer?n("p",[t._v("答案: "),n("br"),t._v(t._s(t.answer(t.question.answer)))]):t._e()],1)],1)},staticRenderFns:[]};var Z=n("VU/8")(X,Y,!1,function(t){n("RgVg")},"data-v-8f5b30e4",null).exports,K={name:"Question",components:{question:Z},props:{id:{type:Number,default:0}},data:function(){return{questions:[]}},beforeMount:function(){var t=this;_.get("bank/question/"+(this.id?this.id:""),{params:{include:this.id?"user,answer":"user"}}).then(function(e){t.id?t.questions.push(e.data):t.questions=e.data.data})}},tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-row",this._l(this.questions,function(t,n){return e("question",{key:n,attrs:{question:t}})}))},staticRenderFns:[]};var et=n("VU/8")(K,tt,!1,function(t){n("YkUL")},"data-v-52e63f96",null).exports,nt={name:"Paper",data:function(){return{papers:[],fields:{id:"#",title:"题目",score:"分数"}}},beforeMount:function(){var t=this;_.get("/bank/paper/",{params:{include:"user,questions"}}).then(function(e){t.papers=e.data.data}).catch(function(e){t.$store.dispatch("except",e)})},methods:{exam:function(t){this.$router.push({name:"Examination",params:{id:t}})}}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",t._l(t.papers,function(e,a){return n("b-card",{key:a,staticClass:"mb-2 col-10",attrs:{title:e.title,"sub-title":e.user.name+" 创建于 "+e.created}},[n("b-table",{attrs:{items:e.questions.data,fields:t.fields,hover:"",striped:"",bordered:""}}),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(n){t.exam(e.id)}}},[t._v("\n      做题\n    ")])],1)}))},staticRenderFns:[]};var rt=n("VU/8")(nt,at,!1,function(t){n("xTgz")},"data-v-652d82da",null).exports,it={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"p-2"},[n("b-col",{attrs:{cols:"3"}},[n("b-list-group",t._l(t.catalog,function(e,a){return n("b-list-group-item",{key:a,attrs:{to:e.to}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),t._v(" "),n("div",{staticClass:"mt-2 w-100"}),t._v(" "),n("b-list-group",t._l(t.options,function(e,a){return n("b-list-group-item",{key:a,attrs:{to:e.to}},[t._v("\n        "+t._s(e.name)+"\n      ")])}))],1),t._v(" "),n("b-col",[n("router-view")],1)],1)},staticRenderFns:[]};var st=n("VU/8")({name:"Bank",data:function(){return{catalog:[{name:"类型列表",to:{name:"QuestionTag"}},{name:"题库",to:{name:"Question"}},{name:"试卷库",to:{name:"Paper"}}],options:[{name:"出新题",to:{name:"New-Question"}},{name:"出新试卷",to:{name:"New-Paper"}}]}}},it,!1,function(t){n("RyIb")},"data-v-38554f9d",null).exports,ot={name:"Alert",props:{alerts:{type:Object,default:function(){return{type:"light",message:"",index:0,expire:!1,local:!0}}}},data:function(){return{countdown:this.alerts.expire}},computed:{show:function(){return!1===this.alerts.expire||this.alerts.expire}},methods:{read:function(t){this.alerts.local||this.$store.dispatch("read",t)},countdownChange:function(t){this.countdown=t}}},ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.alerts.read?t._e():n("b-alert",{key:t.alerts.index,attrs:{variant:t.alerts.type,show:t.show,dismissible:""},on:{dismissed:function(e){t.read(t.alerts.index)},"dismiss-count-down":t.countdownChange}},[t._v("\n  "+t._s(t.alerts.message)),n("br"),t._v(" "),t.alerts.expire?n("small",[t._v("此消息将在"+t._s(t.countdown)+"秒后关闭")]):t._e()])},staticRenderFns:[]};var lt=n("VU/8")(ot,ct,!1,function(t){n("DEim")},"data-v-4f834521",null).exports,ut={name:"QuestionTag",components:{alert:lt},props:{slug:{type:String,default:""}},data:function(){return{tags:[]}},beforeMount:function(){var t=this;""!==this.slug&&(this.url+=this.slug),_.get("/bank/question-tag",{params:{include:"user"}}).then(function(e){e.data.data?t.tags=e.data.data:t.tags.push(e.data)})}},dt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.tags.length?n("b-row",t._l(t.tags,function(e,a){return n("b-card",{key:a,staticClass:"mb-2 col-10",attrs:{title:e.title,"sub-title":e.user.name+" 创建于 "+e.created}},[n("p",[t._v(t._s(e.description))])])})):n("alert",{attrs:{alerts:{type:"danger",message:"查询的类型不存在",index:0,expire:!1,local:!0}}})},staticRenderFns:[]};var pt=n("VU/8")(ut,dt,!1,function(t){n("DT5i")},"data-v-07a18d40",null).exports,ft=(n("y3Hw"),n("3Jm6"),n("PDMX"),{name:"NewPaper",components:{question:Z,icon:n("ykR9").a},filters:{pluck_id:function(t){return t.map(function(t){return t.id}).join(" , ")}},data:function(){return{id:null,title:"",questions:[],pagination:null,answer:[]}},computed:{total_score:function(){return this.answer.reduce(function(t,e){return t+e.score},0)}},beforeMount:function(){var t=this;_.get("bank/question",{params:{per_page:40}}).then(function(e){t.questions=e.data.data,t.pagination=e.data.meta.pagination})},methods:{submit:function(){var t=this;this.id?this.attachQuestions():this.createPaper().then(function(){return t.attachQuestions()})},getOrigin:function(t){return this.questions[t.id]},remove:function(t){this.answer.splice(t,1)},swapUp:function(t){this.answer.splice(t-1,2,this.answer[t],this.answer[t-1])},swapDown:function(t){this.answer.splice(t,2,this.answer[t+1],this.answer[t])},createPaper:function(){var t=this;return new o.a(function(e,n){_.post("bank/paper",{title:t.title}).then(function(n){t.$store.dispatch("success","成功建立试题，id : "+n.data.id),t.id=n.data.id,e(n)}).catch(function(e){t.$store.dispatch("except",e),n(e)})})},attachQuestions:function(){var t=this,e=this.answer.map(function(t,e){return{id:t.id,score:t.score,sequence:e+1}});return new o.a(function(n,a){_.post("bank/paper/"+t.id+"/attach",{questions:e}).then(function(e){t.$store.dispatch("success","已添加试题"),n(e)}).catch(function(e){t.$store.dispatch("except",e),a(e)})})}}}),mt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("b-form-group",{attrs:{id:"paper-title-group",horizontal:"","label-cols":"2",breakpoint:"md",label:"试卷标题","label-size":"lg","label-for":"paper-title"}},[n("b-form-input",{attrs:{id:"paper-title",size:"lg",type:"text"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),n("small",[t._v("总分 "),n("b",[t._v(t._s(t.total_score))])]),t._v(" "),n("div",{staticClass:"mb-4"},[t._v("加入的题目")]),t._v(" "),t._l(t.selected,function(e,a){return n("b-row",{key:a},[n("b-col",{attrs:{cols:"2"}},[n("label",{staticClass:"mb-2"},[t._v(" 第 "+t._s(a+1)+" 题 ")]),t._v(" "),n("div",{staticClass:"w-100"}),t._v(" "),n("b-button-group",[n("b-button",{staticClass:"icon-center",attrs:{variant:"danger",size:"sm"},on:{click:function(e){t.remove(a)}}},[n("icon",{attrs:{name:"trash-alt"}})],1),t._v(" "),0!==a?n("b-button",{staticClass:"icon-center",attrs:{size:"sm",variant:"default"},on:{click:function(e){t.swapUp(a)}}},[n("icon",{attrs:{name:"arrow-up"}})],1):t._e(),t._v(" "),a!==t.selected.length-1?n("b-button",{staticClass:"icon-center",attrs:{size:"sm",variant:"default"},on:{click:function(e){t.swapDown(a)}}},[n("icon",{attrs:{name:"arrow-down"}})],1):t._e()],1),t._v(" "),n("b-form-group",{staticClass:"mt-2",attrs:{"label-for":"question-"+e.id+"-score","label-cols":"5",label:"分数",horizontal:""}},[n("b-form-input",{attrs:{id:"question-"+e.id+"-score",type:"number",size:"sm"},model:{value:e.score,callback:function(n){t.$set(e,"score",t._n(n))},expression:"item.score"}})],1)],1),t._v(" "),n("b-col",[n("question",{attrs:{question:t.getOrigin(e)}})],1)],1)}),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"question-list",expression:"'question-list'"}],attrs:{variant:"outline-primary",block:""}},[t._v("\n      添加新题目\n    ")]),t._v(" "),n("b-button",{staticClass:"mt-2",attrs:{variant:"success",type:"submit"}},[t._v("\n      提交新试卷\n    ")]),t._v(" "),n("b-modal",{attrs:{id:"question-list",title:"请选择题目",size:"lg","ok-only":"",centered:""}},[n("b-container",{staticClass:"question-list",attrs:{fluid:""}},t._l(t.questions,function(e,a){return n("b-form-checkbox",{key:a,attrs:{id:e.id+"-checkbox",value:{id:e.id,score:10}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("span",[t._v("试题编号 "+t._s(e.id))]),t._v(" "),n("question",{attrs:{question:e}})],1)})),t._v(" "),n("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[t._v("\n        已选择题目编号 "+t._s(t._f("pluck_id")(t.selected))+"\n      ")])],1)],2)],1)},staticRenderFns:[]};var ht=n("VU/8")(ft,mt,!1,function(t){n("jCjH")},"data-v-409fd6f0",null).exports,vt={name:"NewQuestion",data:function(){return{question:{title:"",tag:null,options:[{t:""}],answer:""},original_tags:[]}},computed:{tags:function(){var t=this.original_tags.map(function(t,e){return{value:e,text:t.title}});return t.push({value:null,text:"请选择题目类型"}),t},type:function(){return null!==this.question.tag&&this.original_tags[this.question.tag].type},validateAnswer:function(){return this.type&&0!==this.question.answer.length?/^\d+(,\d+)*$/.test(this.question.answer):null},validateOptions:function(){return!(this.type&&this.question.options.length<2)&&null}},beforeMount:function(){var t=this;_.get("/bank/question-tag").then(function(e){t.original_tags=e.data.data})},methods:{addOption:function(){this.question.options.push({t:""})},removeOption:function(t){this.question.options.splice(t,1)},submit:function(){var t={question:this.question.title,type:this.type,tag:this.question.tag,options:this.question.options,answer:this.question.answer};_.post("/bank/question",t).then(function(t){return console.log(t.data)})}}},bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:"新题目","sub-title":"请填写下列空白"}},[n("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("b-form-group",{attrs:{id:"question-title-group",horizontal:"",label:"题面","label-for":"question-title","label-cols":"3",breakpoint:"md"}},[n("b-form-textarea",{attrs:{id:"question-title",rows:"3",type:"text"},model:{value:t.question.title,callback:function(e){t.$set(t.question,"title",e)},expression:"question.title"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"question-tag-group",horizontal:"",label:"类型","label-for":"question-tag","label-cols":"3",breakpoint:"md"}},[n("b-form-select",{attrs:{id:"question-tag",options:t.tags},model:{value:t.question.tag,callback:function(e){t.$set(t.question,"tag",e)},expression:"question.tag"}})],1),t._v(" "),t.type?n("b-form-group",{attrs:{id:"question-options-group",state:t.validateOptions,horizontal:"",label:"选项","label-cols":"3",breakpoint:"md","invalid-feedback":"选项最少两个"}},[t._l(t.question.options,function(e,a){return n("b-form-group",{key:a,attrs:{id:"question-option-group-"+a,label:"# "+(a+1),"label-for":"question-option-"+a,"label-cols":"1",horizontal:""}},[n("div",{staticClass:"input-group"},[n("b-form-input",{attrs:{id:"question-option-"+a,type:"text"},model:{value:e.t,callback:function(n){t.$set(e,"t",n)},expression:"option.t"}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){t.removeOption(a)}}},[t._v("\n              删除此项\n            ")])],1)],1)])}),t._v(" "),n("b-button",{attrs:{variant:"success"},on:{click:t.addOption}},[t._v("\n        添加新选项\n      ")])],2):t._e(),t._v(" "),n("b-form-group",{attrs:{id:"question-answer-group",state:t.validateAnswer,"invalid-feedback":"请按照提示输入格式正确的答案",label:"问题答案","label-for":"question-answer","label-cols":"3",description:"选择题答案请填写选项编号，多选请将选项用 <b>英文逗号 ( ',' )</b> 隔开",horizontal:""}},[n("b-form-textarea",{attrs:{id:"question-answer",state:t.validateAnswer,type:"text",rows:"3"},model:{value:t.question.answer,callback:function(e){t.$set(t.question,"answer",e)},expression:"question.answer"}})],1),t._v(" "),n("b-button",{attrs:{variant:"success",type:"submit"}},[t._v("\n      提交\n    ")])],1)],1)},staticRenderFns:[]};var _t=n("VU/8")(vt,bt,!1,function(t){n("dzWU")},"data-v-719fd10a",null).exports,gt={name:"Examination",props:{id:{type:[String,Number],required:!0,default:0}},data:function(){return{paper:null,answer:[],modal_show:!0,record:null,EULA:!1,second_left:0,interval:null,finished:!1}},computed:{loading:function(){return!1===this.paper?"试卷加载出错或无此试卷":null===this.paper?"正在初始化试卷，请稍后 ...":""},countdown:function(){var t=this.second_left%60;return Math.floor(this.second_left/60)+":"+(t<9?"0"+t:t)}},created:function(){var t=this;/^[1-9][0-9]*$/.test(this.id)?_.get("/bank/paper/"+this.id,{params:{include:"questions"}}).then(function(e){return t.init(e.data)}).catch(function(e){console.error(e),t.paper=!1,t.$store.dispatch("except",e)}):(this.$store.dispatch("except","试卷编号错误"),this.$router.push({name:"Paper"}))},methods:{init:function(t){this.paper=t,this.second_left=60*t.time_limit,this.answer.fill(null,0,t.questions.length)},complete:function(){var t=this;clearInterval(this.interval),_.post("/record/answer/"+this.record.id,{record:this.record.id,answers:this.answer}).then(function(){t.finished=!0}).catch(function(e){return t.$store.dispatch("except",e)})},ELUA_accepted:function(){var t=this;this.EULA=!0,_.post("/record/examination",{paper:this.paper.id}).then(function(e){t.record=e.data}),this.startCountDown()},ELUA_refused:function(){this.$router.push({name:"Home"})},startCountDown:function(){var t=this;0!==this.second_left&&(this.interval=setInterval(function(){t.second_left>0?t.second_left--:t.complete()},1e3))}}},wt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.paper?n("main",[n("b-card",{staticClass:"count-down",attrs:{size:"sm",header:"剩余时间"}},[n("h6",[t._v("\n      "+t._s(t.countdown)+"\n    ")]),t._v(" "),n("div",{staticClass:"w-100"}),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"before-submit",expression:"'before-submit'"}],staticClass:"mt-2",attrs:{size:"sm",variant:"outline-danger"}},[t._v("\n      交卷\n    ")])],1),t._v(" "),n("b-card",[n("h2",{staticClass:"m-2 card-title text-capitalize text-center"},[t._v(t._s(t.paper.title))]),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[t.paper.time_limit?n("h5",{staticClass:"m-2 card-subtitle text-muted text-left"},[t._v("\n          考试时限 :"),n("span",{staticClass:"text-danger"},[t._v(t._s(t.paper.time_limit)+" 分钟")])]):n("h5",{staticClass:"m-2 card-subtitle text-muted text-left"},[t._v("\n          无时间限制\n        ")])]),t._v(" "),n("b-col",{attrs:{cols:"6"}},[t.record?n("h6",{staticClass:"m-2 text-capitalize text-muted text-right"},[t._v("\n          考试记录 :"+t._s(t.record.id)+"\n        ")]):t._e(),t._v(" "),t.record?n("h6",{staticClass:"m-2 text-muted text-right"},[t._v("\n          开始时间 "+t._s(t.record.started)+"\n        ")]):t._e()])],1),t._v(" "),n("b-form",{on:{submit:function(e){return e.preventDefault(),t.complete(e)}}},[t._l(t.paper.questions.data,function(e,a){return n("b-row",{key:a},[n("b-col",{attrs:{cols:"1"}},[n("p",[t._v("第 "+t._s(a+1)+" 题")]),t._v(" "),n("p",[n("small",[t._v(t._s(e.tag.title))])]),t._v(" "),n("p",[n("small",[t._v("本题 "+t._s(e.score)+"分")])])]),t._v(" "),n("b-col",[n("b-form-group",{attrs:{id:"question-"+a+"-group",label:e.title}},[e.tag.meta?e.tag.meta.multiple?n("b-form-checkbox-group",{attrs:{name:"question-options-"+a,options:e.options,stacked:""},model:{value:t.answer[a],callback:function(e){t.$set(t.answer,a,e)},expression:"answer[key]"}}):n("b-form-radio-group",{attrs:{name:"question-options-"+a,options:e.options,stacked:""},model:{value:t.answer[a],callback:function(e){t.$set(t.answer,a,e)},expression:"answer[key]"}}):n("b-form-textarea",{attrs:{name:"question-options-"+a,rows:"3","max-rows":"5"},model:{value:t.answer[a],callback:function(e){t.$set(t.answer,a,e)},expression:"answer[key]"}})],1)],1)],1)}),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"before-submit",expression:"'before-submit'"}],attrs:{variant:"danger"}},[t._v("\n        完成考试，交卷\n      ")])],2)],1),t._v(" "),n("b-modal",{attrs:{id:"before-exam",title:"请仔细阅读以下提示","ok-title":"开始考试","ok-variant":"success","cancel-title":"取消","cancel-variant":"danger",size:"lg",centered:"","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{ok:t.ELUA_accepted,cancel:t.ELUA_refused},model:{value:t.modal_show,callback:function(e){t.modal_show=e},expression:"modal_show"}},[n("h4",[t._v(" 试卷名 : "),n("b",[t._v(t._s(t.paper.title))])]),t._v(" "),n("h5",{staticClass:"text-muted"},[t._v("请您阅读以下提示")]),t._v(" "),n("ol",{attrs:{id:"notice"}},[n("li",{staticClass:"m-1"},[n("span",{staticClass:"text-danger"},[t._v("1. 若您未按规定导致出现问题，后果自负")])]),t._v(" "),n("li",{staticClass:"m-1"},[t._v("2. 如果您点击 “取消” 将会跳转到您的首页")]),t._v(" "),n("li",{staticClass:"m-1"},[t._v("3. 考试一旦开始，便会产生一条 "),n("b",[t._v(" 不能 ")]),t._v(" 修改或删除的考试记录")]),t._v(" "),n("li",{staticClass:"m-1"},[t._v('4. 在您点击 “开始考试" 按钮后，考试开始，并开始倒计时')]),t._v(" "),n("li",{staticClass:"m-1"},[t._v("5. 倒计时不可暂停，倒计时结束后强制交卷")]),t._v(" "),n("li",{staticClass:"m-1"},[t._v("6. 点击倒计时下方的 “交卷按钮” 可以提前交卷")]),t._v(" "),n("li",{staticClass:"m-1"},[t._v("7. 交卷后 "),n("b",[t._v("不能")]),t._v(" 修改试卷")]),t._v(" "),n("li",{staticClass:"m-1"},[t._v("8. 因技术原因，"),n("b",[t._v("只有客观题计入入总分")]),t._v("，主观题不计入总分")]),t._v(" "),n("li",{staticClass:"m-1"},[t._v("9. 祝您考试愉快")])])]),t._v(" "),n("b-modal",{attrs:{id:"before-submit",title:"提示","ok-title":"确定提交","ok-variant":"success","cancel-title":"取消","cancel-variant":"danger",size:"bg",centered:"","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{ok:t.complete}},[n("h4",{staticClass:"text-danger text-center"},[t._v("\n      提交试卷后不可修改，确认提交吗?\n    ")])]),t._v(" "),n("b-modal",{attrs:{id:"after-submit",title:"提示","ok-title":"查看结果","ok-variant":"primary","cancel-title":"返回首页","cancel-variant":"default",size:"sm",centered:"","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{ok:function(e){t.$router.push({name:"Record",params:{id:t.record.id}})},cancel:function(e){t.$router.push({name:"Home"})}},model:{value:t.finished,callback:function(e){t.finished=e},expression:"finished"}},[t._v("\n    考试已结束，您填写的答案已提交\n  ")])],1):n("b-card",{attrs:{align:"center"}},[t._v("\n  "+t._s(t.loading)+"\n")])},staticRenderFns:[]};var xt=n("VU/8")(gt,wt,!1,function(t){n("TEaD")},"data-v-09c94479",null).exports,kt={name:"Record",props:{id:{type:String,required:!0,default:""}},data:function(){return{record:null}},computed:{load:function(){return!1===this.record?"考试记录加载失败":"正在加载考试记录 , 请稍后"},identification:function(){return("id: "+this.record.id).toUpperCase()+"<br> 因技术问题，主观题不计入总分"}},created:function(){var t=this;_.get("/record/examination/"+this.id,{params:{include:["answer_record","paper.user","paper.questions"].join(",")}}).then(function(e){t.record=e.data}).catch(function(e){return t.$store.dispatch("except",e)})},methods:{question:function(t){return this.record.paper.questions.data[t]},score:function(t){return t.meta.origin_type?" ，得分 "+t.score+" 分":""},variant:function(t){return t.meta.origin_type?t.correctness?"success":"danger":"secondary"},answer:function(t){return t instanceof Array?t.join(" , "):t},hash:function(t){var e=0,n=t.length,a=0;if(n>0)for(;a<n;)e=(e<<5)-e+t.charCodeAt(a++)|0;return e},option_variant:function(t,e){var n="wrong-option",a=e.answer,r=e.meta.origin_answer;if(r instanceof Array){if(r.indexOf(t)>=0)return a.indexOf(t)>=0?"correct-option":n;if(a.indexOf(t)>=0)return n}else{if(t===r)return"correct-option";if(t===a)return n}return""}}},yt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.record?n("b-card",{attrs:{"sub-title":t.identification,title:"考试记录"}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h5",{staticClass:"text-center"},[t._v("\n        总览\n      ")]),t._v(" "),n("table",{staticClass:"table table-bordered table-striped"},[n("thead",[n("tr",[n("th",[t._v("分数")]),t._v(" "),n("th",[t._v("开始时间")]),t._v(" "),n("th",[t._v("结束时间")]),t._v(" "),n("th",[t._v("试卷标题")]),t._v(" "),n("th",[t._v("出题人")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v(t._s(t.record.score)+"/"+t._s(t.record.meta.full_score))]),t._v(" "),n("td",[t._v(t._s(t.record.created))]),t._v(" "),n("td",[t._v(t._s(t.record.finished))]),t._v(" "),n("td",[t._v(t._s(t.record.paper.title))]),t._v(" "),n("td",[t._v(t._s(t.record.paper.user.name))])])])])])],1),t._v(" "),t._l(t.record.answer_record.data,function(e,a){return n("b-card",{key:a,staticClass:"mb-2",attrs:{header:"<b class='mr-2'>"+t.question(a).tag.title+"</b>  本题 "+e.meta.origin_score+" 分"+t.score(e),"border-variant":t.variant(e),"header-bg-variant":t.variant(e)}},[n("h5",[t._v(t._s(t.question(a).title))]),t._v(" "),n("dl",[n("b-row",[n("dt",{staticClass:"col-2"},[t._v("正确答案")]),t._v(" "),n("dd",{staticClass:"col-10"},[t._v(t._s(t.answer(e.meta.origin_answer)))])]),t._v(" "),n("b-row",{staticClass:"mt-2"},[n("dt",{staticClass:"col-2"},[t._v("提交的答案")]),t._v(" "),n("dd",{staticClass:"col-10"},[t._v(t._s(t.answer(e.answer)))])])],1),t._v(" "),e.meta.origin_type?n("div",[n("ul",t._l(t.question(a).options,function(a){return n("li",{key:t.hash(a.text),class:["m-1",t.option_variant(a.value,e)]},[n("b",[t._v(t._s(a.value)+". ")]),t._v(t._s(a.text)+"\n        ")])}))]):t._e()])})],2):n("b-card",[t._v("\n  "+t._s(t.load)+"\n")])},staticRenderFns:[]};var qt=n("VU/8")(kt,yt,!1,function(t){n("Dqwv")},"data-v-4ca1f0e9",null).exports,Ct={name:"Notice",props:{id:{type:[String,Number],required:!0,default:0}},data:function(){return{notice:null}},computed:{load:function(){return null===this.notice?"正在加载":this.notice?void 0:"加载失败"}},created:function(){var t=this;_.get("/notice/"+this.id,{params:{include:["author","body"].join(",")}}).then(function(e){t.notice=e.data}).catch(function(e){t.notice=!1,t.$store.dispatch("except",e)})}},Et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.notice?n("b-card",{attrs:{"img-src":t.notice.image,title:t.notice.title,"sub-title":t.notice.excerpt,"img-bottom":""}},[n("div",{domProps:{innerHTML:t._s(t.notice.body.text)}}),t._v(" "),n("div",{staticClass:"text-right"},[n("b-img",{attrs:{src:t.notice.author.avatar,width:"45px"}}),t._v(" "),n("div",[t._v(t._s(t.notice.author.name))]),t._v(" "),n("div",[t._v(t._s(t.notice.published))])],1)]):n("b-card",[t._v("\n  "+t._s(t.load)+"\n")])},staticRenderFns:[]};var $t=n("VU/8")(Ct,Et,!1,function(t){n("G72p")},"data-v-625863f7",null).exports;a.a.use(r.a);var Rt=new r.a({mode:"history",routes:[{path:"/",name:"Index",component:R},{path:"/register",name:"Register",component:D},{path:"/sign-in",alias:"/login",name:"Sign-in",component:F},{path:"/home",name:"Home",component:W,meta:{auth:!0}},{path:"/notice/:id",name:"Notice",component:$t,props:!0,meta:{auth:!0}},{path:"/user",component:z,redirect:{name:"Profile"},meta:{auth:!0},children:[{path:"profile",name:"Profile",component:H},{path:"avatar",name:"Avatar",component:B}]},{path:"/bank",component:st,redirect:{name:"Paper"},meta:{auth:!0},children:[{path:"question-tag/:slug?",name:"QuestionTag",component:pt,props:!0},{path:"question/:id?",name:"Question",component:et,props:!0},{path:"paper/:id?",name:"Paper",component:rt},{path:"new-paper",name:"New-Paper",component:ht},{path:"new-question",name:"New-Question",component:_t}]},{path:"/examination",redirect:{name:"Examination"},component:z,props:!0,meta:{auth:!0},children:[{path:":id",name:"Examination",component:xt,props:!0},{path:"/record/:id",name:"Record",component:qt,props:!0}]}]});Rt.beforeEach(function(t,e,n){for(var a=null,r=0;r<q.length&&!(a=q[r](t,e));r++);a?n(a):n()});var St=Rt,zt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("footer",{staticClass:"footer"},[e("div",{staticClass:"container"},[e("p",{staticClass:"text-muted text-center"},[this._v("一切都是命运石之门的选择")])])])])},staticRenderFns:[]};var At=n("VU/8")({name:"ContentFooter"},zt,!1,function(t){n("aq1M")},"data-v-e38b8a26",null).exports,Tt={name:"Navbar",data:function(){return{brand:"考拉",index:!1,variant:"fate",path:this.$route.path}},computed:I()({},Object(i.c)(["name","authenticated","avatar"])),watch:{"$route.path":function(t){this.index="/"===t,this.variant="/"===t?"fate":"light"}},created:function(){this.index="/"===this.path,this.variant="/"===this.path?"fate":"light"},methods:I()({},Object(i.b)({signOut:"revoke"}))},Pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{attrs:{variant:t.variant,toggleable:"md",type:"light",fixed:"top"}},[n("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),t.index?t._e():n("b-navbar-brand",{attrs:{to:{name:"Index"}}},[t._v("\n    "+t._s(t.brand)+"\n  ")]),t._v(" "),n("b-collapse",{attrs:{id:"nav_collapse","is-nav":""}},[t.index?t._e():n("b-navbar-nav",[n("b-nav-item",{attrs:{to:{name:"Paper"}}},[t._v("我要答题")]),t._v(" "),n("b-nav-item",{attrs:{to:{name:"New-Question"}}},[t._v("我要出题")]),t._v(" "),n("b-nav-item",{attrs:{to:{name:"Examination",params:{id:Math.ceil(200*Math.random())}}}},[t._v("试试手气\n      ")])],1),t._v(" "),n("b-navbar-nav",{staticClass:"ml-auto"},[t.index?t._e():n("b-nav-form",[n("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",type:"text",placeholder:"搜索"}}),t._v(" "),n("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"submit"}},[t._v("\n          搜索\n        ")])],1)],1),t._v(" "),t.authenticated?n("b-navbar-nav",{staticClass:"ml-2"},[n("b-nav-item-dropdown",{attrs:{right:""}},[n("template",{slot:"button-content"},[n("img",{staticClass:"avatar rounded",attrs:{src:t.avatar,alt:t.name}})]),t._v(" "),n("b-dropdown-item",{attrs:{to:{name:"Home"}}},[t._v(" 主页")]),t._v(" "),n("b-dropdown-item",{attrs:{to:{name:"Profile"}}},[t._v(" 个人信息")]),t._v(" "),n("b-dropdown-item",{on:{click:t.signOut}},[t._v(" 登出")])],2)],1):n("b-navbar-nav",{staticClass:"ml-2"},[n("b-nav-item",{staticClass:"border-right",attrs:{to:{name:"Sign-in"}}},[t._v("登录\n      ")]),t._v(" "),n("b-nav-item",{attrs:{to:{name:"Register"}}},[t._v("\n        注册\n      ")])],1)],1)],1)},staticRenderFns:[]};var Ut=n("VU/8")(Tt,Pt,!1,function(t){n("SFiu")},"data-v-7a206cca",null).exports,Dt={name:"Message",computed:I()({},Object(i.d)({messages:function(t){return t.message.messages}}))},Mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"messages"}},this._l(this.messages,function(t,n){return e("alert",{key:n,staticClass:"mb-1 mt-1 mr-2",attrs:{"data-x":n,alerts:t}})}))},staticRenderFns:[]};var Ot={name:"App",components:{"content-footer":At,navbar:Ut,messages:n("VU/8")(Dt,Mt,!1,function(t){n("cSs5")},"data-v-5cfe6c3e",null).exports}},Ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pt-3",attrs:{id:"app"}},[e("navbar"),this._v(" "),e("messages"),this._v(" "),e("b-container",[e("router-view")],1),this._v(" "),e("content-footer")],1)},staticRenderFns:[]};var Nt=n("VU/8")(Ot,Ft,!1,function(t){n("LghQ")},null,null).exports,It=n("e6fC");n("Jmt5"),n("9M+g"),n("zD2r");a.a.use(It.a),a.a.config.devtools=!0,a.a.config.productionTip=!0,a.a.component("alert",lt);new a.a({el:"#app",store:y,router:St,components:{App:Nt},template:"<App/>"})},h9HQ:function(t,e){},hDbs:function(t,e){},hH4u:function(t,e){},jCjH:function(t,e){},oMJ1:function(t,e){},pET9:function(t,e){},qPQx:function(t,e){},xTgz:function(t,e){},ykR9:function(t,e,n){"use strict";var a={},r={name:"icon",props:{name:{type:String,validator:function(t){return t?t in a||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?a[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,n=t.height;return Math.max(e,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,n,a){var r="fa-"+(i++).toString(16);return e[a]=r,' id="'+r+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,n,a,r){var i=n||r;return i&&e[i]?"#"+e[i]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,n=0;this.$children.forEach(function(t){e=Math.max(e,t.width),n=Math.max(n,t.height)}),this.childrenWidth=e,this.childrenHeight=n,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(n-t.height)/2})}},register:function(t){for(var e in t){var n=t[e];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),a[e]=n}},icons:a},i=870711;var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,a){return n("path",t._b({key:"path-"+a},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,a){return n("polygon",t._b({key:"polygon-"+a},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[n("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},staticRenderFns:[]};var o=n("VU/8")(r,s,!1,function(t){n("hDbs")},null,null);e.a=o.exports},zD2r:function(t,e){},zj2Q:function(t,e){}},["eslX"]);
//# sourceMappingURL=app.c7630149ab8a70c598c0.js.map